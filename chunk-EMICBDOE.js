import{a as Le,b as yt,c as Ct,d as _t,e as bt}from"./chunk-5G7S2RLD.js";import{a as xt}from"./chunk-VRZVJ2WA.js";import{a as _e}from"./chunk-KRWTTJPS.js";import{a as ft}from"./chunk-5ENT4XQA.js";import{a as wt}from"./chunk-D42AVTVB.js";import{a as ne}from"./chunk-A4J2ZQI3.js";import{a as ye,c as rt,d as ie}from"./chunk-SOWNCCG4.js";import{a as ut}from"./chunk-KSLAI2AB.js";import{b as Ce,m as q}from"./chunk-DYQSPWX7.js";import{$a as s,$b as nt,Aa as g,Ac as we,Ba as C,Bb as W,Bc as ct,Cc as ve,Db as F,Eb as De,Fc as pt,Gc as dt,Hc as ht,I as Ze,Ic as gt,Ka as de,Mc as Y,O as Te,Oa as j,Pa as Ve,Qa as _,Ra as $,Sa as he,T as pe,Wa as ge,Y as Z,Ya as ue,Za as fe,_a as r,ab as x,ba as D,bb as tt,bc as ot,cb as it,eb as L,f as Ge,fc as Q,gb as f,hb as u,ia as Je,ja as d,ka as h,kb as ee,kc as at,lb as te,ob as Oe,pa as $e,pb as Pe,qb as ke,ra as N,rb as E,rc as xe,sb as p,tb as M,ub as O,uc as st,vc as mt,x as X,xa as J,xb as S,y as Re,yb as I,yc as lt,za as et,zb as A,zc as be}from"./chunk-FCI7FGJ6.js";import{a as b,b as P,h as k}from"./chunk-WWX6BADO.js";var ae=(()=>{let t=class t{constructor(e){this.apiService=e}list(e){return this.apiService.apiCall("post","companies/list",e)}get(e){return this.apiService.apiCall("get","companies/"+e+"/edit")}view(e){return this.apiService.apiCall("get","companies/"+e+"/view")}addOrUpdate(e,i){var n="";return e=="new"?n="companies/create":e=="edit"&&(n="companies/update"),this.apiService.apiCall("post",n,i)}sendImage(e){return this.apiService.apiCall("get","companies/"+e+"/edit")}};t.\u0275fac=function(i){return new(i||t)(Z(Ce))},t.\u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"});let a=t;return a})();var Bt=(a,t)=>t.companiesId;function Ht(a,t){a&1&&(r(0,"small"),p(1,"\xA0(Head Office)"),s())}function Ut(a,t){if(a&1){let o=L();r(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"h6"),p(5),j(6,Ht,2,0,"small"),s(),r(7,"span"),p(8,"No. of Employees "),r(9,"span",13),p(10),s()()(),r(11,"div",14)(12,"a",15),x(13,"i",16),s(),r(14,"ul",17)(15,"li")(16,"a",18),p(17,"View"),s()(),r(18,"li")(19,"a",18),p(20,"Edit"),s()()()()(),r(21,"div",19)(22,"div",20)(23,"div",21),x(24,"img",22),s(),r(25,"div",23)(26,"div",24),x(27,"i",25),r(28,"p",26),p(29),s()(),r(30,"div",24),x(31,"i",27),r(32,"p",26),p(33),r(34,"button",28),f("click",function(){let i=d(o).$implicit,n=u();return h(n.clipboard(n.getPhoneNo(i.companiesPhoneNo)))}),x(35,"i",29),s()()(),r(36,"div",24),x(37,"i",30),r(38,"p",26),p(39),r(40,"button",28),f("click",function(){let i=d(o).$implicit,n=u();return h(n.clipboard(i.companiesEmail))}),x(41,"i",29),s()()(),r(42,"div",24),x(43,"i",31),r(44,"a",32),p(45),s()(),r(46,"div",33),x(47,"i",34),r(48,"p",35),p(49),s()()()()()()()}if(a&2){let o=t.$implicit,e=u();g(5),O("",o.companiesName," "),g(),ge(o.companiesIsHeadOffice==1?6:-1),g(4),M(o.totalEmployees),g(6),te("routerLink","./view/",o.companiesId,""),g(3),te("routerLink","./edit/",o.companiesId,""),g(5),ee("src",e.companyLogo,J),g(5),M(o.companiesAddress),g(4),O("",e.getPhoneNo(o.companiesPhoneNo)," "),g(6),O("",o.companiesEmail," "),g(6),O(" ",o.companiesWebsite," "),g(4),O(" ",o.statusName,"")}}var Mt=(()=>{let t=class t{constructor(e,i,n,m){this.companyService=e,this.commonService=i,this.statusService=n,this.utilityService=m,this.companyArray=[],this.dummyGuid=ft.dummyGUID,this.companyLogo="",this.isCopySelected=!1}ngOnInit(){this.companiesList()}companiesList(){this.companyService.list(null).subscribe({next:e=>{e!=null?e.success&&(this.companyArray=e.response,this.commonService.hideLoader()):(this.commonService.errorMessage(e.message),this.commonService.hideLoader())}})}getPhoneNo(e){return this.utilityService.getPhoneNo(e)}clipboard(e){this.isCopySelected=this.utilityService.clipboard(e),this.commonService.successMessage("copied")}};t.\u0275fac=function(i){return new(i||t)(C(ae),C(q),C(ne),C(_e))},t.\u0275cmp=D({type:t,selectors:[["app-company"]],standalone:!0,features:[W],decls:15,vars:2,consts:[[1,"navbar","bg-body-tertiary","shadow-sm"],[1,"container-fluid"],["routerLink","../dashboard",1,"text-decoration-none"],[1,"text-muted","text-decoration-none"],[1,""],[1,"btn","common-btn",3,"routerLink"],[1,"bi","bi-plus-circle"],[1,"container-fluid","mt-3"],[1,"row","small","g-2"],[1,"col-12","col-md-12","col-lg-6","d-flex","align-items-stretch"],[1,"card","w-100"],[1,"common-header"],[1,"company-header"],[1,"badge-company","common-btn"],[1,"dropdown"],["href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","border-0"],[1,"bi","bi-three-dots-vertical",2,"color","blueviolet"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"routerLink"],[1,"card-body"],[1,"row"],[1,"col-xl-3","col-lg-4","col-md-5","col-sm-12"],[1,"",2,"width","150px",3,"src"],[1,"col-xl-9","col-lg-8","col-md-7","col-sm-12","align-content-center"],[1,"d-flex"],[1,"bi","bi-geo-alt"],[1,"ps-3","mb-2"],[1,"bi","bi-telephone-forward"],["type","button",1,"btn","btn-sm","border-0",3,"click"],[1,"bi","bi-copy"],[1,"bi","bi-envelope-at"],[1,"bi","bi-browser-chrome"],["href","https://vaxainfotech.com/",1,"gap-1","icon-link-hover","ps-3","text-decoration-none"],[1,"d-flex","mt-1"],[1,"bi","bi-box-seam"],[1,"ms-3","badge","bg-primary"]],template:function(i,n){i&1&&(r(0,"nav",0)(1,"div",1)(2,"div")(3,"a",2),p(4,"Dashboard / "),s(),r(5,"a",3),p(6,"Company"),s()(),r(7,"div",4)(8,"a",5),x(9,"i",6),p(10," Add "),s()()()(),r(11,"div",7)(12,"div",8),ue(13,Ut,50,13,"div",9,Bt),s()()),i&2&&(g(8),te("routerLink","./new/",n.dummyGuid,""),g(5),fe(n.companyArray))},dependencies:[ie,Q,Y]});let a=t;return a})();var Me=class{constructor(){this.companiesId="",this.companiesImage="",this.companiesName="",this.companiesDisplayName="",this.companiesEmail="",this.companiesPhoneNo="",this.companiesAddress="",this.companiesWebsite="",this.companiesRegistrationDate="",this.companiesPostalCode="",this.companiesCityName="",this.companiesStatusId=0,this.companiesCompanyTypeId=0,this.companiesStateId=0,this.companiesCountryId=0,this.companiesIsHeadOffice=!1}};var jt=["wrapper"],Qt=["sourceImage"];function qt(a,t){if(a&1){let o=L();r(0,"img",5,0),f("load",function(){d(o);let i=u();return h(i.imageLoadedInView())})("mousedown",function(i){d(o);let n=u();return h(n.startMove(i,n.moveTypes.Drag))})("touchstart",function(i){d(o);let n=u();return h(n.startMove(i,n.moveTypes.Drag))})("error",function(i){d(o);let n=u();return h(n.loadImageError(i))}),s()}if(a&2){let o=t.ngIf,e=u();$("visibility",e.imageVisible?"visible":"hidden")("transform",e.safeTransformStyle()),he("ngx-ic-draggable",!e.disabled&&e.allowMoveImage),_("src",o,J),Ve("alt",e.imageAltText)}}function Yt(a,t){if(a&1){let o=L();tt(0),r(1,"span",9),f("mousedown",function(i){d(o);let n=u(2);return h(n.startMove(i,n.moveTypes.Resize,"topleft"))})("touchstart",function(i){d(o);let n=u(2);return h(n.startMove(i,n.moveTypes.Resize,"topleft"))}),x(2,"span",10),s(),r(3,"span",11),x(4,"span",10),s(),r(5,"span",12),f("mousedown",function(i){d(o);let n=u(2);return h(n.startMove(i,n.moveTypes.Resize,"topright"))})("touchstart",function(i){d(o);let n=u(2);return h(n.startMove(i,n.moveTypes.Resize,"topright"))}),x(6,"span",10),s(),r(7,"span",13),x(8,"span",10),s(),r(9,"span",14),f("mousedown",function(i){d(o);let n=u(2);return h(n.startMove(i,n.moveTypes.Resize,"bottomright"))})("touchstart",function(i){d(o);let n=u(2);return h(n.startMove(i,n.moveTypes.Resize,"bottomright"))}),x(10,"span",10),s(),r(11,"span",15),x(12,"span",10),s(),r(13,"span",16),f("mousedown",function(i){d(o);let n=u(2);return h(n.startMove(i,n.moveTypes.Resize,"bottomleft"))})("touchstart",function(i){d(o);let n=u(2);return h(n.startMove(i,n.moveTypes.Resize,"bottomleft"))}),x(14,"span",10),s(),r(15,"span",17),x(16,"span",10),s(),r(17,"span",18),f("mousedown",function(i){d(o);let n=u(2);return h(n.startMove(i,n.moveTypes.Resize,"top"))})("touchstart",function(i){d(o);let n=u(2);return h(n.startMove(i,n.moveTypes.Resize,"top"))}),s(),r(18,"span",19),f("mousedown",function(i){d(o);let n=u(2);return h(n.startMove(i,n.moveTypes.Resize,"right"))})("touchstart",function(i){d(o);let n=u(2);return h(n.startMove(i,n.moveTypes.Resize,"right"))}),s(),r(19,"span",20),f("mousedown",function(i){d(o);let n=u(2);return h(n.startMove(i,n.moveTypes.Resize,"bottom"))})("touchstart",function(i){d(o);let n=u(2);return h(n.startMove(i,n.moveTypes.Resize,"bottom"))}),s(),r(20,"span",21),f("mousedown",function(i){d(o);let n=u(2);return h(n.startMove(i,n.moveTypes.Resize,"left"))})("touchstart",function(i){d(o);let n=u(2);return h(n.startMove(i,n.moveTypes.Resize,"left"))}),s(),it()}}function Xt(a,t){if(a&1){let o=L();r(0,"div",6),f("keydown",function(i){d(o);let n=u();return h(n.keyboardAccess(i))}),r(1,"div",7),f("mousedown",function(i){d(o);let n=u();return h(n.startMove(i,n.moveTypes.Move))})("touchstart",function(i){d(o);let n=u();return h(n.startMove(i,n.moveTypes.Move))}),s(),j(2,Yt,21,0,"ng-container",8),s()}if(a&2){let o=u();$("top",o.state.cropper().y1,"px")("left",o.state.cropper().x1,"px")("width",o.state.cropper().x2-o.state.cropper().x1,"px")("height",o.state.cropper().y2-o.state.cropper().y1,"px")("margin-left",o.state.options.alignImage==="center"?o.marginLeft:null)("visibility",o.imageVisible?"visible":"hidden"),he("ngx-ic-round",o.state.options.roundCropper),Ve("aria-label",o.state.options.cropperFrameAriaLabel),g(2),_("ngIf",!o.state.options.hideResizeSquares&&!(o.state.options.cropperStaticWidth&&o.state.options.cropperStaticHeight))}}function re(a,t,o){return a=Kt(a,t),Se(a,t,o)}function Kt(a,t){let o=a.x2-a.x1,e=a.y2-a.y1,i=a.x1+o/2,n=a.y1+e/2;t.options.cropperStaticHeight&&t.options.cropperStaticWidth?(o=t.maxSize.width>t.options.cropperStaticWidth?t.options.cropperStaticWidth:t.maxSize.width,e=t.maxSize.height>t.options.cropperStaticHeight?t.options.cropperStaticHeight:t.maxSize.height):(o=Math.max(t.cropperScaledMinWidth,Math.min(o,t.cropperScaledMaxWidth,t.maxSize.width)),e=Math.max(t.cropperScaledMinHeight,Math.min(e,t.cropperScaledMaxHeight,t.maxSize.height)),t.options.maintainAspectRatio&&(t.maxSize.width/t.options.aspectRatio<t.maxSize.height?e=o/t.options.aspectRatio:o=e*t.options.aspectRatio));let m=i-o/2,c=m+o,l=n-e/2,y=l+e;return{x1:m,x2:c,y1:l,y2:y}}function Se(a,t,o=!1){return a.x1<0&&(a=P(b({},a),{x1:0,x2:a.x2-(o?a.x1:0)})),a.y1<0&&(a=P(b({},a),{y2:a.y2-(o?a.y1:0),y1:0})),a.x2>t.maxSize.width&&(a=P(b({},a),{x1:a.x1-(o?a.x2-t.maxSize.width:0),x2:t.maxSize.width})),a.y2>t.maxSize.height&&(a=P(b({},a),{y1:a.y1-(o?a.y2-t.maxSize.height:0),y2:t.maxSize.height})),a}function Gt(a,t){let o=Ie(a)-t.clientX,e=Ae(a)-t.clientY;return{x1:t.cropper.x1+o,y1:t.cropper.y1+e,x2:t.cropper.x2+o,y2:t.cropper.y2+e}}function St(a,t,o){let e=b({},o.cropper()),i=Ie(a)-t.clientX,n=Ae(a)-t.clientY;switch(t.position){case"left":e.x1=Math.min(Math.max(t.cropper.x1+i,e.x2-o.cropperScaledMaxWidth),e.x2-o.cropperScaledMinWidth);break;case"topleft":e.x1=Math.min(Math.max(t.cropper.x1+i,e.x2-o.cropperScaledMaxWidth),e.x2-o.cropperScaledMinWidth),e.y1=Math.min(Math.max(t.cropper.y1+n,e.y2-o.cropperScaledMaxHeight),e.y2-o.cropperScaledMinHeight);break;case"top":e.y1=Math.min(Math.max(t.cropper.y1+n,e.y2-o.cropperScaledMaxHeight),e.y2-o.cropperScaledMinHeight);break;case"topright":e.x2=Math.max(Math.min(t.cropper.x2+i,e.x1+o.cropperScaledMaxWidth),e.x1+o.cropperScaledMinWidth),e.y1=Math.min(Math.max(t.cropper.y1+n,e.y2-o.cropperScaledMaxHeight),e.y2-o.cropperScaledMinHeight);break;case"right":e.x2=Math.max(Math.min(t.cropper.x2+i,e.x1+o.cropperScaledMaxWidth),e.x1+o.cropperScaledMinWidth);break;case"bottomright":e.x2=Math.max(Math.min(t.cropper.x2+i,e.x1+o.cropperScaledMaxWidth),e.x1+o.cropperScaledMinWidth),e.y2=Math.max(Math.min(t.cropper.y2+n,e.y1+o.cropperScaledMaxHeight),e.y1+o.cropperScaledMinHeight);break;case"bottom":e.y2=Math.max(Math.min(t.cropper.y2+n,e.y1+o.cropperScaledMaxHeight),e.y1+o.cropperScaledMinHeight);break;case"bottomleft":e.x1=Math.min(Math.max(t.cropper.x1+i,e.x2-o.cropperScaledMaxWidth),e.x2-o.cropperScaledMinWidth),e.y2=Math.max(Math.min(t.cropper.y2+n,e.y1+o.cropperScaledMaxHeight),e.y1+o.cropperScaledMinHeight);break;case"center":let m="scale"in a?a.scale:1,c=Math.min(Math.max(o.cropperScaledMinWidth,Math.abs(t.cropper.x2-t.cropper.x1)*m),o.cropperScaledMaxWidth),l=Math.min(Math.max(o.cropperScaledMinHeight,Math.abs(t.cropper.y2-t.cropper.y1)*m),o.cropperScaledMaxHeight);e.x1=t.clientX-c/2,e.x2=t.clientX+c/2,e.y1=t.clientY-l/2,e.y2=t.clientY+l/2,e.x1<0?(e.x2-=e.x1,e.x1=0):e.x2>o.maxSize.width&&(e.x1-=e.x2-o.maxSize.width,e.x2=o.maxSize.width),e.y1<0?(e.y2-=e.y1,e.y1=0):e.y2>o.maxSize.height&&(e.y1-=e.y2-o.maxSize.height,e.y2=o.maxSize.height);break}return o.options.maintainAspectRatio?Zt(t.position,e,o):e}function Zt(a,t,o){t=b({},t);let e=0,i=0;switch(a){case"top":t.x2=t.x1+(t.y2-t.y1)*o.options.aspectRatio,e=Math.max(t.x2-o.maxSize.width,0),i=Math.max(0-t.y1,0),(e>0||i>0)&&(t.x2-=i*o.options.aspectRatio>e?i*o.options.aspectRatio:e,t.y1+=i*o.options.aspectRatio>e?i:e/o.options.aspectRatio);break;case"bottom":t.x2=t.x1+(t.y2-t.y1)*o.options.aspectRatio,e=Math.max(t.x2-o.maxSize.width,0),i=Math.max(t.y2-o.maxSize.height,0),(e>0||i>0)&&(t.x2-=i*o.options.aspectRatio>e?i*o.options.aspectRatio:e,t.y2-=i*o.options.aspectRatio>e?i:e/o.options.aspectRatio);break;case"topleft":t.y1=t.y2-(t.x2-t.x1)/o.options.aspectRatio,e=Math.max(0-t.x1,0),i=Math.max(0-t.y1,0),(e>0||i>0)&&(t.x1+=i*o.options.aspectRatio>e?i*o.options.aspectRatio:e,t.y1+=i*o.options.aspectRatio>e?i:e/o.options.aspectRatio);break;case"topright":t.y1=t.y2-(t.x2-t.x1)/o.options.aspectRatio,e=Math.max(t.x2-o.maxSize.width,0),i=Math.max(0-t.y1,0),(e>0||i>0)&&(t.x2-=i*o.options.aspectRatio>e?i*o.options.aspectRatio:e,t.y1+=i*o.options.aspectRatio>e?i:e/o.options.aspectRatio);break;case"right":case"bottomright":t.y2=t.y1+(t.x2-t.x1)/o.options.aspectRatio,e=Math.max(t.x2-o.maxSize.width,0),i=Math.max(t.y2-o.maxSize.height,0),(e>0||i>0)&&(t.x2-=i*o.options.aspectRatio>e?i*o.options.aspectRatio:e,t.y2-=i*o.options.aspectRatio>e?i:e/o.options.aspectRatio);break;case"left":case"bottomleft":t.y2=t.y1+(t.x2-t.x1)/o.options.aspectRatio,e=Math.max(0-t.x1,0),i=Math.max(t.y2-o.maxSize.height,0),(e>0||i>0)&&(t.x1+=i*o.options.aspectRatio>e?i*o.options.aspectRatio:e,t.y2-=i*o.options.aspectRatio>e?i:e/o.options.aspectRatio);break;case"center":t.x2=t.x1+(t.y2-t.y1)*o.options.aspectRatio,t.y2=t.y1+(t.x2-t.x1)/o.options.aspectRatio;let n=Math.max(0-t.x1,0),m=Math.max(t.x2-o.maxSize.width,0),c=Math.max(t.y2-o.maxSize.height,0),l=Math.max(0-t.y1,0);(n>0||m>0||c>0||l>0)&&(t.x1+=c*o.options.aspectRatio>n?c*o.options.aspectRatio:n,t.x2-=l*o.options.aspectRatio>m?l*o.options.aspectRatio:m,t.y1+=l*o.options.aspectRatio>m?l:m/o.options.aspectRatio,t.y2-=c*o.options.aspectRatio>n?c:n/o.options.aspectRatio);break}return t}function Ie(a){return"touches"in a&&a.touches[0]?a.touches[0].clientX:"clientX"in a?a.clientX:0}function Ae(a){return"touches"in a&&a.touches[0]?a.touches[0].clientY:"clientX"in a?a.clientY:0}var Be=class{constructor(){this.cropper=de({x1:0,x2:0,y1:0,y2:0}),this.transform={},this.options={format:"png",output:"blob",autoCrop:!0,maintainAspectRatio:!0,aspectRatio:1,resetCropOnAspectRatioChange:!0,resizeToWidth:0,resizeToHeight:0,cropperMinWidth:0,cropperMinHeight:0,cropperMaxHeight:0,cropperMaxWidth:0,cropperStaticWidth:0,cropperStaticHeight:0,canvasRotation:0,roundCropper:!1,onlyScaleDown:!1,imageQuality:92,backgroundColor:null,containWithinAspectRatio:!1,hideResizeSquares:!1,alignImage:"center",cropperFrameAriaLabel:void 0,checkImageType:!0},this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=3}setOptionsFromChanges(t){t.options?.currentValue&&this.setOptions(t.options.currentValue);let o=Object.entries(t).filter(([e])=>e in this.options).reduce((e,[i,n])=>P(b({},e),{[i]:n.currentValue}),{});Object.keys(o).length>0&&this.setOptions(o)}setOptions(t){if(this.options=b(b({},this.options),t||{}),this.validateOptions(),!this.loadedImage?.transformed.image.complete||!this.maxSize)return;let o=!1;this.options.maintainAspectRatio&&t.aspectRatio||t.maintainAspectRatio?(this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.options.maintainAspectRatio&&(this.options.resetCropOnAspectRatioChange||!this.aspectRatioIsCorrect())&&(this.cropper.set(this.maxSizeCropperPosition()),o=!0)):((t.cropperMinWidth||t.cropperMinHeight)&&(this.setCropperScaledMinSize(),o=!0),(t.cropperMaxWidth||t.cropperMaxHeight)&&(this.setCropperScaledMaxSize(),o=!0),(t.cropperStaticWidth||t.cropperStaticHeight)&&(o=!0)),o&&this.cropper.update(e=>re(e,this,!1))}validateOptions(){if(this.options.maintainAspectRatio&&!this.options.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}setMaxSize(t,o){this.maxSize={width:t,height:o},this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()}setCropperScaledMinSize(){this.loadedImage?.transformed.size?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.cropperScaledMinWidth=this.options.cropperMinWidth>0?Math.max(20,this.options.cropperMinWidth/this.loadedImage.transformed.size.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.options.maintainAspectRatio?this.cropperScaledMinHeight=Math.max(20,this.cropperScaledMinWidth/this.options.aspectRatio):this.options.cropperMinHeight>0?this.cropperScaledMinHeight=Math.max(20,this.options.cropperMinHeight/this.loadedImage.transformed.size.height*this.maxSize.height):this.cropperScaledMinHeight=20}setCropperScaledMaxSize(){if(this.loadedImage?.transformed.size){let t=this.loadedImage.transformed.size.width/this.maxSize.width;this.cropperScaledMaxWidth=this.options.cropperMaxWidth>20?this.options.cropperMaxWidth/t:this.maxSize.width,this.cropperScaledMaxHeight=this.options.cropperMaxHeight>20?this.options.cropperMaxHeight/t:this.maxSize.height,this.options.maintainAspectRatio&&(this.cropperScaledMaxWidth>this.cropperScaledMaxHeight*this.options.aspectRatio?this.cropperScaledMaxWidth=this.cropperScaledMaxHeight*this.options.aspectRatio:this.cropperScaledMaxWidth<this.cropperScaledMaxHeight*this.options.aspectRatio&&(this.cropperScaledMaxHeight=this.cropperScaledMaxWidth/this.options.aspectRatio))}else this.cropperScaledMaxWidth=this.maxSize.width,this.cropperScaledMaxHeight=this.maxSize.height}equalsCropperPosition(t){let o=this.cropper();return o==null&&t==null||o!=null&&t!=null&&o.x1.toFixed(3)===t.x1.toFixed(3)&&o.y1.toFixed(3)===t.y1.toFixed(3)&&o.x2.toFixed(3)===t.x2.toFixed(3)&&o.y2.toFixed(3)===t.y2.toFixed(3)}equalsTransformTranslate(t){return(this.transform.translateH??0)===(t.translateH??0)&&(this.transform.translateV??0)===(t.translateV??0)}equalsTransform(t){return this.equalsTransformTranslate(t)&&(this.transform.scale??1)===(t.scale??1)&&(this.transform.rotate??0)===(t.rotate??0)&&(this.transform.flipH??!1)===(t.flipH??!1)&&(this.transform.flipV??!1)===(t.flipV??!1)}aspectRatioIsCorrect(){let t=this.cropper();return(t.x2-t.x1)/(t.y2-t.y1)===this.options.aspectRatio}resizeCropperPosition(t){(t.width!==this.maxSize.width||t.height!==this.maxSize.height)&&this.cropper.update(o=>({x1:o.x1*this.maxSize.width/t.width,x2:o.x2*this.maxSize.width/t.width,y1:o.y1*this.maxSize.height/t.height,y2:o.y2*this.maxSize.height/t.height}))}maxSizeCropperPosition(){return{x1:0,y1:0,x2:this.maxSize.width,y2:this.maxSize.height}}},z=function(a){return a.Drag="drag",a.Move="move",a.Resize="resize",a.Pinch="pinch",a}(z||{});function Jt(a,t,o){let e=a.width,i=a.height;t=Math.round(t),o=Math.round(o);let n=e/t,m=i/o,c=Math.ceil(n/2),l=Math.ceil(m/2),y=a.getContext("2d");if(y){let V=y.getImageData(0,0,e,i),R=y.createImageData(t,o),w=V.data,v=R.data;for(let T=0;T<o;T++)for(let U=0;U<t;U++){let se=(U+T*t)*4,Ot=T*m,B=0,me=0,Ne=0,je=0,Qe=0,qe=0,Ye=0,Pt=Math.floor(U*n),kt=Math.floor(T*m),Ee=Math.ceil((U+1)*n),ze=Math.ceil((T+1)*m);Ee=Math.min(Ee,e),ze=Math.min(ze,i);for(let le=kt;le<ze;le++){let Xe=Math.abs(Ot-le)/l,Dt=U*n,Lt=Xe*Xe;for(let ce=Pt;ce<Ee;ce++){let Ke=Math.abs(Dt-ce)/c,K=Math.sqrt(Lt+Ke*Ke);if(K>=1)continue;B=2*K*K*K-3*K*K+1;let G=4*(ce+le*e);Ye+=B*w[G+3],Ne+=B,w[G+3]<255&&(B=B*w[G+3]/250),je+=B*w[G],Qe+=B*w[G+1],qe+=B*w[G+2],me+=B}}v[se]=je/me,v[se+1]=Qe/me,v[se+2]=qe/me,v[se+3]=Ye/Ne}a.width=t,a.height=o,y.putImageData(R,0,0)}}function It(a,t){return a/100*t}var He=class{crop(t,o){let e=this.getImagePosition(t),i=e.x2-e.x1,n=e.y2-e.y1,m=document.createElement("canvas");m.width=i,m.height=n;let c=m.getContext("2d");if(!c)return null;t.options.backgroundColor!=null&&(c.fillStyle=t.options.backgroundColor,c.fillRect(0,0,i,n));let l=(t.transform.scale||1)*(t.transform.flipH?-1:1),y=(t.transform.scale||1)*(t.transform.flipV?-1:1),{translateH:V,translateV:R}=this.getCanvasTranslate(t),w=t.loadedImage.transformed;c.setTransform(l,0,0,y,w.size.width/2+V,w.size.height/2+R),c.translate(-e.x1/l,-e.y1/y),c.rotate((t.transform.rotate||0)*Math.PI/180),c.drawImage(w.image,-w.size.width/2,-w.size.height/2);let v={width:i,height:n,imagePosition:e,cropperPosition:b({},t.cropper())};t.options.containWithinAspectRatio&&(v.offsetImagePosition=this.getOffsetImagePosition(t));let T=this.getResizeRatio(i,n,t.options);return T!==1&&(v.width=Math.round(i*T),v.height=t.options.maintainAspectRatio?Math.round(v.width/t.options.aspectRatio):Math.round(n*T),Jt(m,v.width,v.height)),o==="blob"?this.cropToBlob(v,m,t):(v.base64=m.toDataURL("image/"+t.options.format,this.getQuality(t.options)),v)}cropToBlob(t,o,e){return k(this,null,function*(){return t.blob=yield new Promise(i=>o.toBlob(i,"image/"+e.options.format,this.getQuality(e.options))),t.blob&&(t.objectUrl=URL.createObjectURL(t.blob)),t})}getCanvasTranslate(t){if(t.transform.translateUnit==="px"){let o=this.getRatio(t);return{translateH:(t.transform.translateH||0)*o,translateV:(t.transform.translateV||0)*o}}else return{translateH:t.transform.translateH?It(t.transform.translateH,t.loadedImage.transformed.size.width):0,translateV:t.transform.translateV?It(t.transform.translateV,t.loadedImage.transformed.size.height):0}}getRatio(t){return t.loadedImage.transformed.size.width/t.maxSize.width}getImagePosition(t){let o=this.getRatio(t),e=t.cropper(),i={x1:Math.round(e.x1*o),y1:Math.round(e.y1*o),x2:Math.round(e.x2*o),y2:Math.round(e.y2*o)};return t.options.containWithinAspectRatio||(i.x1=Math.max(i.x1,0),i.y1=Math.max(i.y1,0),i.x2=Math.min(i.x2,t.loadedImage.transformed.size.width),i.y2=Math.min(i.y2,t.loadedImage.transformed.size.height)),i}getOffsetImagePosition(t){let o=t.options.canvasRotation+t.loadedImage.exifTransform.rotate,e=this.getRatio(t),i,n;o%2?(i=(t.loadedImage.transformed.size.width-t.loadedImage.original.size.height)/2,n=(t.loadedImage.transformed.size.height-t.loadedImage.original.size.width)/2):(i=(t.loadedImage.transformed.size.width-t.loadedImage.original.size.width)/2,n=(t.loadedImage.transformed.size.height-t.loadedImage.original.size.height)/2);let m=t.cropper(),c={x1:Math.round(m.x1*e)-i,y1:Math.round(m.y1*e)-n,x2:Math.round(m.x2*e)-i,y2:Math.round(m.y2*e)-n};return t.options.containWithinAspectRatio||(c.x1=Math.max(c.x1,0),c.y1=Math.max(c.y1,0),c.x2=Math.min(c.x2,t.loadedImage.transformed.size.width),c.y2=Math.min(c.y2,t.loadedImage.transformed.size.height)),c}getResizeRatio(t,o,e){let i=e.resizeToWidth/t,n=e.resizeToHeight/o,m=new Array;e.resizeToWidth>0&&m.push(i),e.resizeToHeight>0&&m.push(n);let c=m.length===0?1:Math.min(...m);return c>1&&!e.onlyScaleDown?c:Math.min(c,1)}getQuality(t){return Math.min(1,Math.max(0,t.imageQuality/100))}},$t="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==";function ei(){return new Promise(a=>{let t=new Image;t.onload=()=>{let o=t.width===1&&t.height===2;a(o)},t.src=$t})}function ti(a){switch(typeof a=="object"&&(a=ii(a)),a){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}function ii(a){let t=new DataView(a);if(t.getUint16(0,!1)!==65496)return-2;let o=t.byteLength,e=2;for(;e<o;){if(t.getUint16(e+2,!1)<=8)return-1;let i=t.getUint16(e,!1);if(e+=2,i==65505){if(t.getUint32(e+=2,!1)!==1165519206)return-1;let n=t.getUint16(e+=6,!1)==18761;e+=t.getUint32(e+4,n);let m=t.getUint16(e,n);e+=2;for(let c=0;c<m;c++)if(t.getUint16(e+c*12,n)==274)return t.getUint16(e+c*12+8,n)}else{if((i&65280)!==65280)break;e+=t.getUint16(e,!1)}}return-1}var Ue=class{constructor(){this.autoRotateSupported=ei()}loadImageFile(t,o){return k(this,null,function*(){let e=yield t.arrayBuffer();return o.options.checkImageType?yield this.checkImageTypeAndLoadImageFromArrayBuffer(e,t.type,o):yield this.loadImageFromArrayBuffer(e,o)})}checkImageTypeAndLoadImageFromArrayBuffer(t,o,e){return this.isValidImageType(o)?this.loadImageFromArrayBuffer(t,e,o):Promise.reject(new Error("Invalid image type"))}isValidImageType(t){return/image\/(png|jpg|jpeg|heic|bmp|gif|tiff|svg|webp|x-icon|vnd.microsoft.icon)/.test(t)}loadImageFromURL(t,o){return k(this,null,function*(){let i=yield(yield fetch(t)).blob(),n=yield i.arrayBuffer();return yield this.loadImageFromArrayBuffer(n,o,i.type)})}loadBase64Image(t,o){let e=this.base64ToArrayBuffer(t);return this.loadImageFromArrayBuffer(e,o)}base64ToArrayBuffer(t){t=t.replace(/^data:([^;]+);base64,/gmi,"");let o=atob(t),e=o.length,i=new Uint8Array(e);for(let n=0;n<e;n++)i[n]=o.charCodeAt(n);return i.buffer}loadImageFromArrayBuffer(t,o,e){return k(this,null,function*(){let i=yield new Promise((n,m)=>k(this,null,function*(){try{let c=new Blob([t],e?{type:e}:void 0),l=URL.createObjectURL(c),y=new Image,R=e==="image/svg+xml"?yield this.getSvgImageSize(c):void 0;y.onload=()=>n({originalImage:y,originalImageSize:R,originalObjectUrl:l,originalArrayBuffer:t}),y.onerror=m,y.src=l}catch(c){m(c)}}));return yield this.transformImageFromArrayBuffer(i,o,i.originalImageSize!=null)})}getSvgImageSize(t){return k(this,null,function*(){let i=new DOMParser().parseFromString(yield t.text(),"image/svg+xml").querySelector("svg");if(!i)throw Error("Failed to parse SVG image");let n=i.getAttribute("width"),m=i.getAttribute("height");if(n&&m)return null;let c=i.getAttribute("viewBox")||i.getAttribute("viewbox");if(c){let l=c.split(" ");return{width:+l[2],height:+l[3]}}throw Error("Failed to load SVG image. SVG must have width + height or viewBox definition.")})}transformImageFromArrayBuffer(t,o,e=!1){return k(this,null,function*(){let i=yield this.autoRotateSupported,n=ti(i?-1:t.originalArrayBuffer);if(!t.originalImage||!t.originalImage.complete)return Promise.reject(new Error("No image loaded"));let m={original:{objectUrl:t.originalObjectUrl,image:t.originalImage,size:t.originalImageSize??{width:t.originalImage.naturalWidth,height:t.originalImage.naturalHeight}},exifTransform:n};return this.transformLoadedImage(m,o,e)})}transformLoadedImage(t,o,e=!1){return k(this,null,function*(){let i=o.options.canvasRotation+t.exifTransform.rotate,n=t.original.size;if(!e&&i===0&&!t.exifTransform.flip&&!o.options.containWithinAspectRatio)return{original:{objectUrl:t.original.objectUrl,image:t.original.image,size:b({},n)},transformed:{objectUrl:t.original.objectUrl,image:t.original.image,size:b({},n)},exifTransform:t.exifTransform};let m=this.getTransformedSize(n,t.exifTransform,o),c=document.createElement("canvas");c.width=m.width,c.height=m.height;let l=c.getContext("2d");l?.setTransform(t.exifTransform.flip?-1:1,0,0,1,c.width/2,c.height/2),l?.rotate(Math.PI*(i/2)),l?.drawImage(t.original.image,-n.width/2,-n.height/2);let y=yield new Promise(w=>c.toBlob(w,o.options.format));if(!y)throw new Error("Failed to get Blob for transformed image.");let V=URL.createObjectURL(y),R=yield this.loadImageFromObjectUrl(V);return{original:{objectUrl:t.original.objectUrl,image:t.original.image,size:b({},n)},transformed:{objectUrl:V,image:R,size:{width:R.width,height:R.height}},exifTransform:t.exifTransform}})}loadImageFromObjectUrl(t){return new Promise((o,e)=>{let i=new Image;i.onload=()=>o(i),i.onerror=e,i.src=t})}getTransformedSize(t,o,e){let i=e.options.canvasRotation+o.rotate;if(e.options.containWithinAspectRatio)if(i%2){let n=t.width*e.options.aspectRatio,m=t.height/e.options.aspectRatio;return{width:Math.max(t.height,n),height:Math.max(t.width,m)}}else{let n=t.height*e.options.aspectRatio,m=t.width/e.options.aspectRatio;return{width:Math.max(t.width,n),height:Math.max(t.height,m)}}return i%2?{height:t.width,width:t.height}:{width:t.width,height:t.height}}};function ni(a){switch(a){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}function oi(a){switch(a){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}function ai(a,t){switch(a){case"ArrowUp":return{clientX:0,clientY:t*-1};case"ArrowRight":return{clientX:t,clientY:0};case"ArrowDown":return{clientX:0,clientY:t};case"ArrowLeft":default:return{clientX:t*-1,clientY:0}}}var At=(()=>{let t=class t{get alignImageStyle(){return this.state.options.alignImage}constructor(e){this.sanitizer=e,this.pinchStart$=new Ge,this.cropService=new He,this.loadImageService=new Ue,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.moveTypes=z,this.state=new Be,this.safeImgDataUrl=de(void 0),this.safeTransformStyle=de(void 0),this.marginLeft="0px",this.imageVisible=!1,this.allowMoveImage=!1,this.checkImageType=!0,this.disabled=!1,this.hidden=!1,this.imageCropped=N(),this.startCropImage=N(),this.imageLoaded=N(),this.cropperReady=N(),this.loadImageFailed=N(),this.transformChange=N(),this.cropperChange=N(),this.reset()}ngOnInit(){this.state.stepSize=this.initialStepSize||this.state.stepSize}ngOnChanges(e){let i=this.state.cropper(),n=this.state.transform,m=this.state.options.backgroundColor;if(this.state.setOptionsFromChanges(e),this.onChangesInputImage(e),e.transform&&this.transform&&(this.state.transform=this.transform,this.setCssTransform()),!this.state.loadedImage?.transformed.image.complete||!this.state.maxSize)return;if(this.containWithinAspectRatio&&e.aspectRatio||e.containWithinAspectRatio||e.canvasRotation){this.loadImageService.transformLoadedImage(this.state.loadedImage,this.state).then(l=>this.setLoadedImage(l)).catch(l=>this.loadImageError(l));return}e.cropper&&this.cropper&&this.state.cropper.set(re(this.cropper,this.state,!0));let c=!this.state.equalsCropperPosition(i);c&&(!this.cropper||!this.state.equalsCropperPosition(this.cropper))&&this.cropperChange.emit(this.state.cropper()),(c||!this.state.equalsTransform(n)||this.state.options.backgroundColor!==m)&&this.doAutoCrop(),e.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesInputImage(e){(e.imageChangedEvent||e.imageURL||e.imageBase64||e.imageFile)&&this.reset(),e.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),e.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),e.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),e.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){let e=this.imageChangedEvent?.target?.files;return e instanceof FileList&&e.length>0}reset(){this.safeImgDataUrl.set("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="),this.state.loadedImage=void 0,this.state.maxSize=void 0,this.imageVisible=!1}loadImageFile(e){this.loadImageService.loadImageFile(e,this.state).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}loadBase64Image(e){this.loadImageService.loadBase64Image(e,this.state).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}loadImageFromURL(e){this.loadImageService.loadImageFromURL(e,this.state).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}setLoadedImage(e){this.state.loadedImage=e,this.safeImgDataUrl.set(this.sanitizer.bypassSecurityTrustResourceUrl(e.transformed.objectUrl))}loadImageError(e){console.error(e),this.loadImageFailed.emit()}setCssTransform(){let e=this.state.transform?.translateUnit||"%";this.safeTransformStyle.set(this.sanitizer.bypassSecurityTrustStyle(`translate(${this.state.transform.translateH||0}${e}, ${this.state.transform.translateV||0}${e}) scaleX(`+(this.state.transform.scale||1)*(this.state.transform.flipH?-1:1)+") scaleY("+(this.state.transform.scale||1)*(this.state.transform.flipV?-1:1)+") rotate("+(this.state.transform.rotate||0)+"deg)"))}imageLoadedInView(){this.state.loadedImage!=null&&(this.imageLoaded.emit(this.state.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.cropper&&(!this.maintainAspectRatio||this.state.aspectRatioIsCorrect())?(this.state.cropper.set(re(this.cropper,this.state,!0)),this.emitCropperPositionChange(this.cropper)):(this.state.cropper.set(re(this.state.maxSizeCropperPosition(),this.state,!0)),this.cropperChange.emit(this.state.cropper())),this.imageVisible=!0,this.cropperReady.emit(b({},this.state.maxSize)),this.doAutoCrop()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage?.nativeElement?.offsetWidth>1}onResize(){if(this.state.loadedImage)if(this.hidden)this.resizedWhileHidden=!0;else{let e=b({},this.state.maxSize);this.setMaxSize(),this.state.resizeCropperPosition(e)}}keyboardAccess(e){this.changeKeyboardStepSize(e),this.keyboardMoveCropper(e)}changeKeyboardStepSize(e){let i=+e.key;i>=1&&i<=9&&(this.state.stepSize=i)}keyboardMoveCropper(e){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key))return;let n=e.shiftKey?z.Resize:z.Move,m=e.altKey?oi(e.key):ni(e.key),c=ai(e.key,this.state.stepSize);e.preventDefault(),e.stopPropagation(),this.moveStart={type:n,position:m,clientX:0,clientY:0,transform:this.state.transform,cropper:this.state.cropper()},this.handleMouseMove(c),this.handleMouseUp()}startMove(e,i,n=null){this.disabled||this.moveStart&&this.moveStart.type===z.Pinch||i===z.Drag&&!this.allowMoveImage||("preventDefault"in e&&e.preventDefault(),this.moveStart={type:i,position:n,clientX:Ie(e),clientY:Ae(e),transform:this.state.transform,cropper:this.state.cropper()},this.initMouseMove())}initMouseMove(){Re(X(document,"mousemove"),X(document,"touchmove")).pipe(Te(Re(X(document,"mouseup"),X(document,"touchend"),this.pinchStart$).pipe(Ze()))).subscribe({next:e=>this.handleMouseMove(e),complete:()=>this.handleMouseUp()})}handleMouseMove(e){if(this.moveStart){if("stopPropagation"in e&&e.stopPropagation(),"preventDefault"in e&&e.preventDefault(),this.moveStart.type===z.Move)this.state.cropper.set(Se(Gt(e,this.moveStart),this.state,!0));else if(this.moveStart.type===z.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.state.cropper.set(Se(St(e,this.moveStart,this.state),this.state,!1));else if(this.moveStart.type===z.Drag){let i=Ie(e)-this.moveStart.clientX,n=Ae(e)-this.moveStart.clientY;this.state.transform=P(b({},this.state.transform),{translateH:(this.moveStart.transform?.translateH||0)+i,translateV:(this.moveStart.transform?.translateV||0)+n}),this.setCssTransform()}}}handleMouseUp(){!this.moveStart||this.moveStart.type===z.Pinch||((!this.state.equalsCropperPosition(this.moveStart.cropper)||this.moveStart.transform&&!this.state.equalsTransform(this.moveStart.transform))&&(this.moveStart.type===z.Drag?this.transformChange.emit(this.state.transform):this.cropperChange.emit(this.state.cropper()),this.doAutoCrop()),this.moveStart=void 0)}startPinch(e){if(this.disabled||!this.sourceImageLoaded()||e.touches.length<2)return;"preventDefault"in e&&e.preventDefault();let i=this.state.cropper();this.moveStart={type:z.Pinch,position:"center",clientX:i.x1+(i.x2-i.x1)/2,clientY:i.y1+(i.y2-i.y1)/2,cropper:i},this.initPinch()}initPinch(){this.pinchStart$.next(),X(document,"touchmove").pipe(Te(X(document,"touchend"))).subscribe({next:e=>this.handlePinchMove(e),complete:()=>this.handlePinchStop()})}handlePinchMove(e){this.moveStart&&(e.preventDefault&&e.preventDefault(),this.moveStart.type===z.Pinch&&!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.state.cropper.set(Se(St(e,this.moveStart,this.state),this.state,!1)))}handlePinchStop(){this.moveStart&&(this.state.equalsCropperPosition(this.moveStart.cropper)||(this.emitCropperPositionChange(this.moveStart.cropper),this.doAutoCrop()),this.moveStart=void 0)}setMaxSize(){if(this.sourceImage){let e=getComputedStyle(this.sourceImage.nativeElement);this.state.setMaxSize(parseFloat(e.width),parseFloat(e.height)),this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.state.maxSize.width/2+"px)")}}emitCropperPositionChange(e){this.state.equalsCropperPosition(e)||this.cropperChange.emit(this.state.cropper())}doAutoCrop(){this.state.options.autoCrop&&this.crop()}crop(e=this.state.options.output){if(this.state.loadedImage?.transformed?.image!=null){if(this.startCropImage.emit(),e==="blob")return this.cropToBlob();if(e==="base64")return this.cropToBase64()}return null}cropToBlob(){return new Promise((e,i)=>k(this,null,function*(){let n=yield this.cropService.crop(this.state,"blob");n?(this.imageCropped.emit(n),e(n)):i("Crop image failed")}))}cropToBase64(){let e=this.cropService.crop(this.state,"base64");return e?(this.imageCropped.emit(e),e):null}resetCropperPosition(){this.state.cropper.set(re(this.state.maxSizeCropperPosition(),this.state,!0)),this.cropperChange.emit(this.state.cropper())}ngOnDestroy(){this.pinchStart$.complete()}};t.\u0275fac=function(i){return new(i||t)(C(xe))},t.\u0275cmp=D({type:t,selectors:[["image-cropper"]],viewQuery:function(i,n){if(i&1&&(Oe(jt,7),Oe(Qt,5)),i&2){let m;Pe(m=ke())&&(n.wrapper=m.first),Pe(m=ke())&&(n.sourceImage=m.first)}},hostVars:6,hostBindings:function(i,n){i&1&&f("resize",function(){return n.onResize()},!1,et),i&2&&($("text-align",n.alignImageStyle),he("disabled",n.disabled)("ngx-ic-hidden",n.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",options:"options",cropperFrameAriaLabel:"cropperFrameAriaLabel",output:"output",format:"format",autoCrop:"autoCrop",cropper:"cropper",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",checkImageType:"checkImageType",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange",cropperChange:"cropperChange"},standalone:!0,features:[Je,W],decls:4,vars:10,consts:[["sourceImage",""],[3,"touchstart"],["class","ngx-ic-source-image","role","presentation",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],["role","presentation",1,"ngx-ic-source-image",3,"load","mousedown","touchstart","error","src"],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],["role","presentation",1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(i,n){i&1&&(r(0,"div",1),f("touchstart",function(c){return n.startPinch(c)}),j(1,qt,2,8,"img",2),x(2,"div",3),j(3,Xt,3,16,"div",4),s()),i&2&&($("background",n.imageVisible&&n.state.options.backgroundColor),g(),_("ngIf",n.safeImgDataUrl()),g(),$("width",(n.state.maxSize==null?null:n.state.maxSize.width)||0,"px")("height",(n.state.maxSize==null?null:n.state.maxSize.height)||0,"px")("margin-left",n.alignImage==="center"?n.marginLeft:null),g(),_("ngIf",n.imageVisible))},dependencies:[ot],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:var(--cropper-move-border, 1px solid rgba(255, 255, 255, .5))}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ic-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0});let a=t;return a})();function si(a,t){if(a&1){let o=L();r(0,"form",0),f("ngSubmit",function(){d(o);let i=u();return h(i.saveImage())}),r(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"image-cropper",5),A("transformChange",function(i){d(o);let n=u();return I(n.transform,i)||(n.transform=i),h(i)}),f("imageCropped",function(i){d(o);let n=u();return h(n.imageCropped(i))})("imageLoaded",function(i){d(o);let n=u();return h(n.imageLoaded(i))})("cropperReady",function(){d(o);let i=u();return h(i.cropperReady())})("loadImageFailed",function(){d(o);let i=u();return h(i.loadImageFailed())}),s(),r(6,"div",6)(7,"button",7),f("click",function(){d(o);let i=u();return h(i.zoomOut())}),x(8,"i",8),s(),r(9,"button",9),f("click",function(){d(o);let i=u();return h(i.zoomIn())}),x(10,"i",10),s(),x(11,"br"),s()(),r(12,"div",11)(13,"button",12),f("click",function(){d(o);let i=u();return h(i.closePopup())}),p(14," Cancel"),s(),r(15,"button",13),p(16," Upload"),s()()()()()(),x(17,"div",14)}if(a&2){let o=u();g(5),_("imageChangedEvent",o.imageChangedEvent)("maintainAspectRatio",!0),S("transform",o.transform)}}var Et=(()=>{let t=class t{constructor(){this.isPopupShow=!1,this.loadImage=new $e,this.croppedImage="",this.canvasRotation=0,this.translateH=0,this.translateV=0,this.scale=1,this.showCropper=!1,this.containWithinAspectRatio=!1,this.transform={translateUnit:"px"},this.loading=!1,this.allowMoveImage=!1,this.hidden=!1}ngOnInit(){}imageCropped(e){e.base64&&(this.croppedImage=e.base64)}imageLoaded(e){}cropperReady(){}loadImageFailed(){}zoomOut(){this.scale-=.1,this.transform=P(b({},this.transform),{scale:this.scale})}zoomIn(){this.scale+=.1,this.transform=P(b({},this.transform),{scale:this.scale})}closePopup(){this.isPopupShow=!1}saveImage(){this.isPopupShow=!1;var e;e=this.base64ToFile(this.croppedImage,this.imageChangedEvent.target.files[0].name),this.loadImage.emit(e)}base64ToFile(e,i){let n=e.split(","),m=n[0].match(/:(.*?);/)[1],c=atob(n[1]),l=c.length,y=new Uint8Array(l);for(;l--;)y[l]=c.charCodeAt(l);return new File([y],i,{type:m})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=D({type:t,selectors:[["app-image-uploader-popup"]],inputs:{isPopupShow:"isPopupShow",imageChangedEvent:"imageChangedEvent"},outputs:{loadImage:"loadImage"},standalone:!0,features:[W],decls:1,vars:1,consts:[[3,"ngSubmit"],["id","exampleModalToggle","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1",1,"modal","fade","show","d-block"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-body"],["format","png","output","base64","format","png",3,"transformChange","imageCropped","imageLoaded","cropperReady","loadImageFailed","imageChangedEvent","maintainAspectRatio","transform"],[1,"mb-2","text-center"],[1,"btn","common-btn","btn-outline-secondary","rounded-circle","me-2",3,"click"],[1,"bi","bi-zoom-out"],[1,"btn","common-btn","btn-outline-primary","rounded-circle",3,"click"],[1,"bi","bi-zoom-in"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],["type","submit",1,"btn","btn-primary","btn-sm"],[1,"offcanvas-backdrop","fade","show"]],template:function(i,n){i&1&&j(0,si,18,3),i&2&&ge(n.isPopupShow?0:-1)},dependencies:[Q,Y,ve,be,we,At],styles:[".croppedImage[_ngcontent-%COMP%]{width:150px;height:150px}.cropper-wrapper[_ngcontent-%COMP%]{width:150px;height:150px;position:relative}.loader[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#00000080;display:flex;justify-content:center;align-items:center;font-size:20px;color:#fff}input[type=file][_ngcontent-%COMP%]::-webkit-file-upload-button{background-color:#0d6efd;color:#fff;border:2px solid #0d6efd;font-size:.8rem}"]});let a=t;return a})();var zt=(()=>{let t=class t{constructor(e,i,n){this.commonService=e,this.apiService=i,this.http=n}uploadCompanyLogo(e){return this.apiService.apiCall("post","import_export/company/logo/upload",e)}};t.\u0275fac=function(i){return new(i||t)(Z(q),Z(Ce),Z(at))},t.\u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"});let a=t;return a})();var ci=(a,t)=>t.id,H=a=>({"is-invalid":a}),Rt=(a,t)=>[a,t];function pi(a,t){if(a&1&&(r(0,"option",64),p(1),s()),a&2){let o=t.$implicit;_("value",o.id),g(),M(o.name)}}var Tt=(()=>{let t=class t{constructor(e,i,n,m,c,l,y,V){this.route=e,this.companyService=i,this.commonService=n,this.router=m,this.lookupService=c,this.statusService=l,this.sanitizer=y,this.importExport=V,this.isPhotoUploadPopupShow=!1,this.companyData=new Me,this.companyTypeList=[],this.countryList=[],this.stateList=[],this.statusList=[],this.checkedList=[],this.phoneNo=[],this.actionId="",this.actionType="",this.companyLogo="",this.showImage=!0,this.isHeadOffice=!1,this.imageChangedEvent=null,this.SearchCountryField=yt,this.CountryISO=Le,this.preferredCountries=[Le.India]}ngOnInit(){let e=this.route.snapshot.paramMap.get("id"),i=this.route.snapshot.paramMap.get("type");i!=null&&(this.actionType=i,i=="edit"?e!=null&&(this.actionId=e,this.getCompanyData(e)):(this.companyTypeLookup(0),this.countryLookup(0),this.stateLookup(0),this.resetStatus()))}uploadCompanyLogo(e){this.imageChangedEvent=e,this.isPhotoUploadPopupShow=!0}saveCompanyLogo(e){let i=new FormData;i.append("file",e),this.importExport.uploadCompanyLogo(i).subscribe({next:n=>{n!=null?n.success&&(this.companyLogo=n.response):this.commonService.errorMessage(n.message)}})}resetStatus(){this.statusList=this.statusService.list(!0),(this.companyData.companiesStatusId==0||this.companyData.companiesStatusId==null)&&(this.companyData.companiesStatusId=this.statusService.defaultValue())}getCompanyData(e){this.companyService.get(e).subscribe({next:i=>{i!=null?i.success&&(this.companyData=i.response[0],this.resetStatus(),this.companyData!=null&&(this.phoneNo=JSON.parse(this.companyData.companiesPhoneNo),this.companyTypeLookup(this.companyData.companiesCompanyTypeId),this.countryLookup(this.companyData.companiesCountryId),this.stateLookup(this.companyData.companiesStateId))):this.commonService.errorMessage(i.message)}})}submitCompanyData(e){(this.actionType=="new"||this.actionType=="edit")&&(this.companyData.companiesPhoneNo=JSON.stringify(this.phoneNo),this.companyService.addOrUpdate(this.actionType,this.companyData).subscribe({next:i=>{i!=null?i.success&&(this.commonService.successMessage(i.message),e&&this.router.navigate(["company"])):this.commonService.errorMessage(i.message)}}))}companyTypeLookup(e=0){this.lookupService.get("companyTypes",0,e?.toString()).subscribe({next:i=>{i!=null?i.success&&(this.companyTypeList=i.response):this.commonService.errorMessage(i.message)}})}onCompanyTypeChange(e){e.length>0&&(this.companyData.companiesCompanyTypeId=e[0].id)}countryLookup(e=0){this.lookupService.get("countries",0,e?.toString()).subscribe({next:i=>{i!=null?i.success&&(this.countryList=i.response):this.commonService.errorMessage(i.message)}})}onCountryChange(e){e.length>0&&(this.companyData.companiesCountryId=e[0].id)}stateLookup(e=0){this.lookupService.get("states",0,e?.toString()).subscribe({next:i=>{i!=null?i.success&&(this.stateList=i.response):this.commonService.errorMessage(i.message)}})}onStateChange(e){e.length>0&&(this.companyData.companiesStateId=e[0].id)}};t.\u0275fac=function(i){return new(i||t)(C(ye),C(ae),C(q),C(rt),C(wt),C(ne),C(xe),C(zt))},t.\u0275cmp=D({type:t,selectors:[["app-company-edit"]],standalone:!0,features:[W],decls:122,vars:71,consts:[["fileinputForCompanyLogo",""],["f","ngForm"],["companiesIsHeadOffice","ngModel"],["companiesName","ngModel"],["companiesDisplayName","ngModel"],["companiesEmail","ngModel"],["companiesWebsite","ngModel"],["companiesRegistrationDate","ngModel"],["companiesAddress","ngModel"],["companiesCityName","ngModel"],["companiesPostalCode","ngModel"],["companiesStatusId","ngModel"],[1,"navbar","bg-body-tertiary","shadow-sm"],[1,"container-fluid"],["routerLink","/company",1,"text-decoration-none"],[1,"text-muted","text-decoration-none"],[1,"container-fluid","mt-3"],[1,"row"],[1,"col-md-6"],[1,"shadow","me-2",2,"width","150px",3,"src","alt","title"],["type","file","accept",".jpg, .jpeg, .png",2,"display","none",3,"change"],[1,"btn","common-btn",3,"click"],[1,"bi","bi-cloud-upload"],[1,"col-md-12","mt-4"],["novalidate","",3,"ngSubmit"],[1,"card"],[1,"col-12","common-header"],[1,"form-check"],["type","checkbox","value","","name","companiesIsHeadOffice","id","flexCheckDefault",1,"form-check-input",3,"ngModelChange","ngModel"],["for","flexCheckDefault",1,"form-check-label"],[1,"row","card-body","g-3","small"],[1,"col-xxl-4","col-lg-6","col-md-12"],["for","compniesName",1,"form-label","mb-1","mb-1"],["type","text","id","compniesName","placeholder","Name","name","companiesName","required","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngClass"],[1,"invalid-feedback"],["for","DisplayName",1,"form-label","mb-1"],["type","text","id","DisplayName","placeholder","Display Name","name","companiesDisplayName","required","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngClass"],["for","email",1,"form-label","mb-1"],["type","email","id","email","placeholder","you@example.com","name","companiesEmail","required","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngClass"],[1,"col-xxl-3","col-lg-6","col-md-12"],["for","ContactNo",1,"form-label","mb-1","w-100"],["name","companiesPhoneNo",3,"ngModelChange","cssClass","preferredCountries","enableAutoCountrySelect","enablePlaceholder","searchCountryFlag","searchCountryField","selectFirstCountry","selectedCountryISO","maxLength","phoneValidation","ngModel"],[1,"col-xxl-4","col-lg-4","col-md-6"],["for","CompanyType",1,"form-label","mb-1"],["placeholder","Primary",3,"onChange","multiDropdown","items","showSearch","showStatus"],["for","website",1,"form-label","mb-1"],["type","text","id","website","placeholder","Website","name","companiesWebsite","required","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngClass"],[1,"col-xxl-2","col-lg-2","col-md-4","col-12"],["for","text",1,"form-label","mb-1"],["type","Date","id","Establishment","placeholder","Establishment","name","companiesRegistrationDate","required","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngClass"],[1,"col-xxl-12","col-md-12"],["for","address",1,"form-label","mb-1"],["placeholder","Address","id","floatingTextarea","rows","1","name","companiesAddress","required","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngClass"],[1,"col-xxl-2","col-lg-4","col-md-6","col-12"],["for","country",1,"form-label","mb-1"],["for","state",1,"form-label","mb-1"],[1,"col-xxl-2","col-lg-4","col-md-4","col-12"],["for","City",1,"form-label","mb-1"],["type","text","id","City","placeholder","City","name","companiesCityName","required","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngClass"],[1,"col-xxl-2","col-lg-3","col-md-4","col-12"],["for","PostalCode",1,"form-label","mb-1"],["type","text","id","PostalCode","placeholder","Postal Code","name","companiesPostalCode","required","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngClass"],["for","Status",1,"form-label","mb-1"],["id","Status","name","companiesStatusId","required","",1,"form-select","form-select-sm",3,"ngModelChange","ngModel","ngClass"],[3,"value"],[1,"my-3"],["type","submit",1,"btn","btn-sm","common-btn-width","me-1",3,"click"],["type","submit",1,"btn","btn-sm","common-btn-width","common-btn-width-outline",3,"click"],[3,"loadImage","isPopupShow","imageChangedEvent"]],template:function(i,n){if(i&1){let m=L();r(0,"nav",12)(1,"div",13)(2,"div")(3,"a",14),p(4,"Company / "),s(),r(5,"a",15),p(6,"Edit"),s()()()(),r(7,"div",16)(8,"div",17)(9,"div",18),x(10,"img",19),r(11,"input",20,0),f("change",function(l){return d(m),h(n.uploadCompanyLogo(l))}),s(),r(13,"button",21),f("click",function(){d(m);let l=E(12);return h(l.click())}),x(14,"i",22),p(15," Company Logo"),s()(),r(16,"div",23)(17,"form",24,1),f("ngSubmit",function(){d(m);let l=E(18);return h(l.form.valid)}),r(19,"div",25)(20,"div",26)(21,"div"),p(22," Company-Information "),s(),r(23,"div",27)(24,"input",28,2),A("ngModelChange",function(l){return d(m),I(n.companyData.companiesIsHeadOffice,l)||(n.companyData.companiesIsHeadOffice=l),h(l)}),s(),r(26,"label",29),p(27," Head Office "),s()()(),r(28,"div",30)(29,"div",31)(30,"label",32),p(31,"Name"),s(),r(32,"input",33,3),A("ngModelChange",function(l){return d(m),I(n.companyData.companiesName,l)||(n.companyData.companiesName=l),h(l)}),s(),r(34,"div",34),p(35," Valid company Name is required. "),s()(),r(36,"div",31)(37,"label",35),p(38,"Display Name"),s(),r(39,"input",36,4),A("ngModelChange",function(l){return d(m),I(n.companyData.companiesDisplayName,l)||(n.companyData.companiesDisplayName=l),h(l)}),s(),r(41,"div",34),p(42," Valid last Display Name is required. "),s()(),r(43,"div",31)(44,"label",37),p(45,"Email"),s(),r(46,"input",38,5),A("ngModelChange",function(l){return d(m),I(n.companyData.companiesEmail,l)||(n.companyData.companiesEmail=l),h(l)}),s(),r(48,"div",34),p(49," Please enter a valid email for shipping updates. "),s()(),r(50,"div",39)(51,"label",40),p(52,"Contact No"),s(),r(53,"ngx-intl-tel-input",41),A("ngModelChange",function(l){return d(m),I(n.phoneNo,l)||(n.phoneNo=l),h(l)}),s()(),r(54,"div",42)(55,"label",43),p(56,"Company Type"),s(),r(57,"app-dropdown",44),f("onChange",function(l){return d(m),h(n.onCompanyTypeChange(l))}),s(),r(58,"div",34),p(59," Please provide a valid CompanyType. "),s()(),r(60,"div",31)(61,"label",45),p(62,"Website"),s(),r(63,"input",46,6),A("ngModelChange",function(l){return d(m),I(n.companyData.companiesWebsite,l)||(n.companyData.companiesWebsite=l),h(l)}),s(),r(65,"div",34),p(66," Please enter a valid website for shipping updates. "),s()(),r(67,"div",47)(68,"label",48),p(69,"Establishment date"),s(),r(70,"input",49,7),A("ngModelChange",function(l){return d(m),I(n.companyData.companiesRegistrationDate,l)||(n.companyData.companiesRegistrationDate=l),h(l)}),s(),r(72,"div",34),p(73," Please enter a valid DateOfBirth for updates. "),s()(),r(74,"div",50)(75,"label",51),p(76,"Address"),s(),r(77,"textarea",52,8),A("ngModelChange",function(l){return d(m),I(n.companyData.companiesAddress,l)||(n.companyData.companiesAddress=l),h(l)}),s(),r(79,"div",34),p(80," Please enter your address. "),s()(),r(81,"div",53)(82,"label",54),p(83,"Country"),s(),r(84,"app-dropdown",44),f("onChange",function(l){return d(m),h(n.onCountryChange(l))}),s(),r(85,"div",34),p(86," Please select a valid country. "),s()(),r(87,"div",53)(88,"label",55),p(89,"State"),s(),r(90,"app-dropdown",44),f("onChange",function(l){return d(m),h(n.onStateChange(l))}),s(),r(91,"div",34),p(92," Please provide a valid state. "),s()(),r(93,"div",56)(94,"label",57),p(95,"City"),s(),r(96,"input",58,9),A("ngModelChange",function(l){return d(m),I(n.companyData.companiesCityName,l)||(n.companyData.companiesCityName=l),h(l)}),s(),r(98,"div",34),p(99," Pelease fillout the City Name. "),s()(),r(100,"div",59)(101,"label",60),p(102,"Postal Code"),s(),r(103,"input",61,10),A("ngModelChange",function(l){return d(m),I(n.companyData.companiesPostalCode,l)||(n.companyData.companiesPostalCode=l),h(l)}),s(),r(105,"div",34),p(106," Please enter a valid PostalCode for shipping updates. "),s()(),r(107,"div",53)(108,"label",62),p(109,"Status"),s(),r(110,"select",63,11),A("ngModelChange",function(l){return d(m),I(n.companyData.companiesStatusId,l)||(n.companyData.companiesStatusId=l),h(l)}),ue(112,pi,2,2,"option",64,ci),s(),r(114,"div",34),p(115," Please provide a valid Status. "),s()()()(),r(116,"div",65)(117,"button",66),f("click",function(){return d(m),h(n.submitCompanyData(!1))}),p(118,"Save"),s(),r(119,"button",67),f("click",function(){return d(m),h(n.submitCompanyData(!0))}),p(120,"Save & Exit"),s()()()()()(),r(121,"app-image-uploader-popup",68),f("loadImage",function(l){return d(m),h(n.saveCompanyLogo(l))}),s()}if(i&2){let m=E(18),c=E(33),l=E(40),y=E(47),V=E(64),R=E(71),w=E(78),v=E(97),T=E(104),U=E(111);g(10),ee("src",n.companyLogo,J),ee("alt",n.companyData.companiesName),ee("title",n.companyData.companiesName),g(14),S("ngModel",n.companyData.companiesIsHeadOffice),g(8),S("ngModel",n.companyData.companiesName),_("ngClass",F(47,H,m.submitted&&c.errors)),g(7),S("ngModel",n.companyData.companiesDisplayName),_("ngClass",F(49,H,m.submitted&&l.errors)),g(7),S("ngModel",n.companyData.companiesEmail),_("ngClass",F(51,H,m.submitted&&y.errors)),g(7),_("cssClass","custom-tel-input-css")("preferredCountries",De(53,Rt,n.CountryISO.UnitedStates,n.CountryISO.UnitedKingdom))("enableAutoCountrySelect",!1)("enablePlaceholder",!0)("searchCountryFlag",!0)("searchCountryField",De(56,Rt,n.SearchCountryField.Iso2,n.SearchCountryField.Name))("selectFirstCountry",!1)("selectedCountryISO",n.CountryISO.India)("maxLength",15)("phoneValidation",!0),S("ngModel",n.phoneNo),g(4),_("multiDropdown",!1)("items",n.companyTypeList)("showSearch",!0)("showStatus",!0),g(6),S("ngModel",n.companyData.companiesWebsite),_("ngClass",F(59,H,m.submitted&&V.errors)),g(7),S("ngModel",n.companyData.companiesRegistrationDate),_("ngClass",F(61,H,m.submitted&&R.errors)),g(7),S("ngModel",n.companyData.companiesAddress),_("ngClass",F(63,H,m.submitted&&w.errors)),g(7),_("multiDropdown",!1)("items",n.countryList)("showSearch",!0)("showStatus",!0),g(6),_("multiDropdown",!1)("items",n.stateList)("showSearch",!0)("showStatus",!0),g(6),S("ngModel",n.companyData.companiesCityName),_("ngClass",F(65,H,m.submitted&&v.errors)),g(7),S("ngModel",n.companyData.companiesPostalCode),_("ngClass",F(67,H,m.submitted&&T.errors)),g(7),S("ngModel",n.companyData.companiesStatusId),_("ngClass",F(69,H,m.submitted&&U.errors)),g(2),fe(n.statusList),g(9),_("isPopupShow",n.isPhotoUploadPopupShow)("imageChangedEvent",n.imageChangedEvent)}},dependencies:[ie,Q,nt,Y,ve,dt,ht,mt,st,pt,lt,be,gt,ct,we,xt,Et,bt,_t,Ct]});let a=t;return a})();var Vt=(()=>{let t=class t{constructor(e,i,n,m,c,l){this.companyService=e,this.commonService=i,this.statusService=n,this.timeZoneService=m,this.route=c,this.utilityService=l,this.companyObj={},this.isCopySelected=!1}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&this.companiesView(e)}clipboard(e){this.isCopySelected=this.utilityService.clipboard(e),this.commonService.successMessage("copied")}getPhoneNo(e){var i="";if(e!=null){var n=JSON.parse(e);i=n.internationalNumber+" ("+n.countryCode+")"}return i}companiesView(e){this.companyService.view(e).subscribe({next:i=>{i!=null?i.success&&(this.companyObj=i.response[0],this.commonService.hideLoader()):(this.commonService.errorMessage(i.message),this.commonService.hideLoader())}})}displayDateInUserFormat(e){return this.timeZoneService.convertDateInUserFormat(e)}};t.\u0275fac=function(i){return new(i||t)(C(ae),C(q),C(ne),C(ut),C(ye),C(_e))},t.\u0275cmp=D({type:t,selectors:[["app-company-view"]],standalone:!0,features:[W],decls:101,vars:15,consts:[[1,"navbar","bg-body-tertiary","shadow-sm"],[1,"container-fluid"],["routerLink","/company",1,"text-decoration-none"],[1,"text-muted","text-decoration-none"],[1,"container-fluid","mt-3"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"col","common-header"],[1,""],["type","button",1,"text-decoration-none",3,"routerLink"],[1,"card-body","small"],[1,"col-md-4","col-xxl-3","border","text-center","mb-2"],["src","./../../../../../assets/img/vaxa-logo (1).webp","alt","image",1,"shadow-sm","p-3",2,"max-width","260px"],[1,"row","mt-3","mb-1"],[1,"col-lg-4","col-md-6","col-6","fw-semibold"],[1,"col-lg-8","col-md-6","col-6"],[1,"row","mb-1"],["type","button",1,"btn","btn-sm","border-0",3,"click"],[1,"bi","bi-copy"],["href","https://vaxainfotech.com/index.html"],[1,"badge","bg-primary"]],template:function(i,n){i&1&&(r(0,"nav",0)(1,"div",1)(2,"div")(3,"a",2),p(4,"Company / "),s(),r(5,"a",3),p(6,"View"),s()()()(),r(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8),p(12," Company-Information "),r(13,"div",9)(14,"a",10),p(15," Edit "),s()()(),r(16,"div",11)(17,"div",12),x(18,"img",13),s(),r(19,"div",14)(20,"label",15),p(21,"Company Name"),s(),r(22,"div",16)(23,"span"),p(24),s()()(),r(25,"div",17)(26,"label",15),p(27,"Display Name"),s(),r(28,"div",16)(29,"span"),p(30),s()()(),r(31,"div",17)(32,"label",15),p(33,"Contact No"),s(),r(34,"div",16)(35,"span"),p(36),r(37,"button",18),f("click",function(){return n.clipboard(n.getPhoneNo(n.companyObj.companiesPhoneNo))}),x(38,"i",19),s()()()(),r(39,"div",17)(40,"label",15),p(41,"Email"),s(),r(42,"div",16)(43,"span"),p(44),r(45,"button",18),f("click",function(){return n.clipboard(n.companyObj.companiesEmail)}),x(46,"i",19),s()()()(),r(47,"div",17)(48,"label",15),p(49,"Website"),s(),r(50,"div",16)(51,"a",20),p(52),s()()(),r(53,"div",17)(54,"label",15),p(55,"Establishment date"),s(),r(56,"div",16)(57,"span"),p(58),s()()(),r(59,"div",17)(60,"label",15),p(61,"Company Type"),s(),r(62,"div",16)(63,"span"),p(64),s()()(),r(65,"div",17)(66,"label",15),p(67,"Address"),s(),r(68,"div",16)(69,"span"),p(70),s()()(),r(71,"div",17)(72,"label",15),p(73,"Country"),s(),r(74,"div",16)(75,"span"),p(76),s()()(),r(77,"div",17)(78,"label",15),p(79,"State"),s(),r(80,"div",16)(81,"span"),p(82),s()()(),r(83,"div",17)(84,"label",15),p(85,"City"),s(),r(86,"div",16)(87,"span"),p(88),s()()(),r(89,"div",17)(90,"label",15),p(91,"Postal Code"),s(),r(92,"div",16)(93,"span"),p(94),s()()(),r(95,"div",17)(96,"label",15),p(97,"Status"),s(),r(98,"div",16)(99,"span",21),p(100),s()()()()()()()()),i&2&&(g(14),te("routerLink","./../../edit/",n.companyObj.companiesId,""),g(10),O("",n.companyObj.companiesName," "),g(6),O("",n.companyObj.companiesDisplayName," "),g(6),O("",n.getPhoneNo(n.companyObj.companiesPhoneNo)," "),g(8),O("",n.companyObj.companiesEmail," "),g(8),M(n.companyObj.companiesWebsite),g(6),M(n.displayDateInUserFormat(n.companyObj.companiesRegistrationDate)),g(6),M(n.companyObj.companyTypesName),g(6),M(n.companyObj.companiesAddress),g(6),M(n.companyObj.countiresName),g(6),M(n.companyObj.statesName),g(6),M(n.companyObj.companiesCityName),g(6),M(n.companyObj.companiesPostalCode),g(6),M(n.companyObj.statusName))},dependencies:[ie,Q,Y]});let a=t;return a})();var sn=[{path:"",component:Mt},{path:"view/:id",component:Vt},{path:":type/:id",component:Tt}];export{sn as COMPANY_ROUTES};
