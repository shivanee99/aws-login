import{a as se}from"./chunk-QJUVNZXF.js";import{a as le}from"./chunk-D42AVTVB.js";import{a as re}from"./chunk-TX4RGXHY.js";import{a as de}from"./chunk-L32G27ZM.js";import{a as Z,c as Y,d as P}from"./chunk-SOWNCCG4.js";import{a as oe}from"./chunk-KSLAI2AB.js";import{b as H,m as I}from"./chunk-DYQSPWX7.js";import{$a as a,$b as O,Aa as r,Ac as $,Ba as v,Bb as M,Bc as ee,Cc as ie,Db as j,Ec as te,Ic as ne,Ka as N,Mc as ae,Oa as u,Pa as R,Qa as _,T as V,Wa as f,Y as W,Ya as G,Za as B,_a as t,ab as y,ba as T,eb as E,fc as q,gb as x,hb as C,ja as g,ka as h,lb as z,rb as L,sb as d,sc as J,tb as b,ub as U,vc as K,xb as S,yb as D,yc as Q,zb as F,zc as X}from"./chunk-FCI7FGJ6.js";import"./chunk-WWX6BADO.js";var k=(()=>{let o=class o{constructor(i){this.apiService=i}list(i){return this.apiService.apiCall("post","dynamic_fields/list",i)}get(i){return this.apiService.apiCall("get","dynamic_fields/"+i+"/edit")}addOrUpdate(i){var l="update";return i.id==""&&(l="create"),this.apiService.apiCall("post","dynamic_fields/"+l,i)}updateActiveFlag(i){return this.apiService.apiCall("post","dynamic_fields/flag/active/update",i)}};o.\u0275fac=function(l){return new(l||o)(W(H))},o.\u0275prov=V({token:o,factory:o.\u0275fac,providedIn:"root"});let e=o;return e})();var fe=(e,o)=>o.id;function ye(e,o){e&1&&y(0,"i",16)}function ge(e,o){e&1&&y(0,"i",17)}function he(e,o){if(e&1&&(t(0,"span"),u(1,ye,1,0,"i",16)(2,ge,1,0,"i",17),a()),e&2){let s=C();r(),f(s.listDefaultParams.sortingType=="asc"?1:2)}}function _e(e,o){e&1&&y(0,"i",16)}function Ce(e,o){e&1&&y(0,"i",17)}function ve(e,o){if(e&1&&(t(0,"span"),u(1,_e,1,0,"i",16)(2,Ce,1,0,"i",17),a()),e&2){let s=C();r(),f(s.listDefaultParams.sortingType=="asc"?1:2)}}function Se(e,o){e&1&&y(0,"i",16)}function De(e,o){e&1&&y(0,"i",17)}function Fe(e,o){if(e&1&&(t(0,"span"),u(1,Se,1,0,"i",16)(2,De,1,0,"i",17),a()),e&2){let s=C();r(),f(s.listDefaultParams.sortingType=="asc"?1:2)}}function be(e,o){e&1&&y(0,"i",16)}function xe(e,o){e&1&&y(0,"i",17)}function we(e,o){if(e&1&&(t(0,"span"),u(1,be,1,0,"i",16)(2,xe,1,0,"i",17),a()),e&2){let s=C();r(),f(s.listDefaultParams.sortingType=="asc"?1:2)}}function Ee(e,o){e&1&&y(0,"i",16)}function Te(e,o){e&1&&y(0,"i",17)}function Le(e,o){if(e&1&&(t(0,"span"),u(1,Ee,1,0,"i",16)(2,Te,1,0,"i",17),a()),e&2){let s=C();r(),f(s.listDefaultParams.sortingType=="asc"?1:2)}}function Me(e,o){e&1&&y(0,"i",16)}function Pe(e,o){e&1&&y(0,"i",17)}function Ie(e,o){if(e&1&&(t(0,"span"),u(1,Me,1,0,"i",16)(2,Pe,1,0,"i",17),a()),e&2){let s=C();r(),f(s.listDefaultParams.sortingType=="asc"?1:2)}}function ke(e,o){if(e&1){let s=E();t(0,"tr")(1,"td"),d(2),a(),t(3,"td"),d(4),a(),t(5,"td"),d(6),a(),t(7,"td"),d(8),a(),t(9,"td"),d(10),a(),t(11,"td"),d(12),a(),t(13,"td")(14,"div",18)(15,"input",19),x("click",function(l){let n=g(s).$implicit,c=C();return h(c.updateActiveFlagData(n.id,l))}),a()()(),t(16,"td")(17,"a",20),y(18,"i",21),a()()()}if(e&2){let s=o.$implicit;r(2),b(s.dataType),r(2),b(s.fieldLevel),r(2),b(s.createdAt),r(2),b(s.createdBy),r(2),b(s.updatedAt),r(2),b(s.updatedBy),r(3),R("checked",s.isActive==1?!0:null),r(2),z("routerLink","./edit/",s.id,"")}}function Ne(e,o){if(e&1&&(t(0,"tr",14)(1,"td",22),d(2),a()()),e&2){let s=C();r(2),U("",s.listLoadingMessage," ")}}var pe=(()=>{let o=class o{constructor(i,l,n,c){this.dynamicFieldService=i,this.commonService=l,this.loaderService=n,this.timeZoneService=c,this.listDefaultParams=new de,this.dynamicFieldArray=[],this.loaderType=N(""),this.isShowFilter=N(!1),this.isEditCanvasShow=!1,this.isFilterSelected=!1,this.showParentPageLoader=!0,this.listLoadingMessage="Loading Data...",this.totalRows=0}ngOnInit(){this.dynamicFieldList()}dynamicFieldList(){this.loaderType.set("full"),this.dynamicFieldService.list(this.listDefaultParams).subscribe({next:i=>{i!=null?i.success&&i.response.length>0&&(this.dynamicFieldArray=i.response,this.listLoadingMessage="",this.totalRows=i.totalRows,this.listDefaultParams.pageNumber=i.pageNumber,this.listDefaultParams.pageSize=i.pageSize):(this.commonService.errorMessage(i.message),this.listLoadingMessage=i.message),this.showParentPageLoader=!1}})}displayDateInUserFormat(i){return this.timeZoneService.convertDateInUserFormat(i)}changePageNumberAndSize(i){this.listDefaultParams.pageNumber=i.pageNumber,this.listDefaultParams.pageSize=i.pageSize,this.dynamicFieldList()}filterList(i){this.listDefaultParams.pageNumber=1,this.listDefaultParams.pageSize=10,this.listDefaultParams.filterConditions=i.filterConditions,this.listDefaultParams.sortingConditions=i.sortingConditions,this.listDefaultParams.sortingColumn=i.sortingColumn,this.listDefaultParams.sortingType=i.sortingType,this.listDefaultParams.filterConditions.length>0||this.listDefaultParams.sortingConditions.indexOf("name asc")<0||this.listDefaultParams.sortingConditions==""?this.isFilterSelected=!0:this.isFilterSelected=!1,this.dynamicFieldList()}updateActiveFlagData(i,l){if(this.dynamicFieldArray.length>0){for(var n=0;n<this.dynamicFieldArray.length;n++)if(this.dynamicFieldArray[n].id==i&&(this.dynamicFieldArray[n].isActive=l.target.checked==!0?1:0,i!=null&&i!="")){var c={id:i,isActive:this.dynamicFieldArray[n].isActive};this.dynamicFieldService.updateActiveFlag(c).subscribe({next:p=>{p!=null?p.success&&this.commonService.successMessage(p.message):this.commonService.errorMessage(p.message)}})}}}};o.\u0275fac=function(l){return new(l||o)(v(k),v(I),v(J),v(oe))},o.\u0275cmp=T({type:o,selectors:[["app-pages"]],standalone:!0,features:[M],decls:46,vars:10,consts:[[1,"navbar","bg-body-tertiary","shadow-sm"],[1,"container-fluid"],["routerLink","/dashboard",1,"text-decoration-none"],[1,"text-muted","text-decoration-none"],["role","button"],["routerLink","./new","type","button",1,"btn","common-btn","mx-1"],[1,"bi","bi-plus"],[1,"container-fluid","mt-3"],[1,"row"],[1,"col-12"],[1,"list-table"],[1,"table","table-sm"],[1,"table-secondary"],["scope","row"],[1,"text-center"],[3,"parentListRefresh","pageNumber","pageSize","totalRows"],[1,"bi","bi-arrow-down"],[1,"bi","bi-arrow-up"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","flexSwitchCheckChecked",1,"form-check-input",3,"click"],["type","button",1,"btn","common-btn","me-1",3,"routerLink"],[1,"bi","bi-pencil"],["colspan","8"]],template:function(l,n){l&1&&(t(0,"nav",0)(1,"div",1)(2,"div")(3,"a",2),d(4,"Dashboard / "),a(),t(5,"a",3),d(6,"Dynamic Field"),a()(),t(7,"form",4)(8,"a",5),y(9,"i",6),d(10,"Add"),a()()()(),t(11,"div",7)(12,"div",8)(13,"div",9)(14,"div",10)(15,"table",11)(16,"thead")(17,"tr",12)(18,"th",13),d(19,"Data Type "),u(20,he,3,1,"span"),a(),t(21,"th"),d(22,"Field Level"),a(),t(23,"th",13),d(24,"Created At "),u(25,ve,3,1,"span"),a(),t(26,"th",13),d(27,"Created By "),u(28,Fe,3,1,"span"),a(),t(29,"th",13),d(30,"Updated At "),u(31,we,3,1,"span"),a(),t(32,"th",13),d(33,"Updated By "),u(34,Le,3,1,"span"),a(),t(35,"th",13),d(36,"Status "),u(37,Ie,3,1,"span"),a(),t(38,"th",13),d(39,"Actions"),a()()(),t(40,"tbody"),G(41,ke,19,9,"tr",null,fe),u(43,Ne,3,1,"tr",14),a()()()(),t(44,"div",9)(45,"app-table-footer",15),x("parentListRefresh",function(p){return n.changePageNumberAndSize(p)}),a()()()()),l&2&&(r(20),f(n.listDefaultParams.sortingColumn=="name"?20:-1),r(5),f(n.listDefaultParams.sortingColumn=="createdAt"?25:-1),r(3),f(n.listDefaultParams.sortingColumn=="createdBy"?28:-1),r(3),f(n.listDefaultParams.sortingColumn=="updatedAt"?31:-1),r(3),f(n.listDefaultParams.sortingColumn=="updatedBy"?34:-1),r(3),f(n.listDefaultParams.sortingColumn=="status"?37:-1),r(4),B(n.dynamicFieldArray),r(2),f(n.dynamicFieldArray.length==0?43:-1),r(2),_("pageNumber",n.listDefaultParams.pageNumber)("pageSize",n.listDefaultParams.pageSize)("totalRows",n.totalRows))},dependencies:[re,P]});let e=o;return e})();var w=class{constructor(){this.id=0,this.displayName="",this.parentId=1,this.isActive=1}};var Ae=e=>({"is-invalid":e});function Ve(e,o){if(e&1){let s=E();t(0,"div",25)(1,"label",26),d(2,"Parent Id "),t(3,"span",22),d(4,"*"),a()(),t(5,"ng-select",33,5),F("ngModelChange",function(l){g(s);let n=C();return D(n.dynamicFieldData.parentId,l)||(n.dynamicFieldData.parentId=l),h(l)}),a()()}if(e&2){let s=C();r(5),_("items",s.dynamicsFieldList),S("ngModel",s.dynamicFieldData.parentId)}}var A=(()=>{let o=class o{constructor(i,l,n,c,p){this.dynamicFieldService=i,this.commonService=l,this.route=n,this.router=c,this.lookupService=p,this.dynamicFieldData=new w,this.isFormSubmit=!1,this.subGroupList=[],this.dynamicsFieldList=[],this.dataTypeList=[{id:"alphanumeric",name:"AlphaNumeric"},{id:"content",name:"Content"},{id:"date",name:"Date"},{id:"datetime",name:"Datetime"},{id:"decimal",name:"Decimal"},{id:"number",name:"Number"}],this.fieldTypeList=[{id:"product",name:"Product"},{id:"variation",name:"Variation"},{id:"sku",name:"Sku"},{id:"incentive",name:"Incentive"}]}ngOnInit(){this.subGroupsListLookup(),this.dynamicsFieldListLookup();let i=this.route.snapshot.paramMap.get("id");if(i){var l=Number(i);this.getDynamicFieldData(l)}}getDynamicFieldData(i){this.isFormSubmit=!1,this.dynamicFieldService.get(i).subscribe({next:l=>{l!=null?l.success&&(l.response!=0?this.dynamicFieldData=l.response:this.dynamicFieldData=new w):this.commonService.errorMessage(l.message)}})}dynamicFieldDataUpdate(i){this.dynamicFieldData!=null&&(this.isFormSubmit=!0,this.dynamicFieldService.addOrUpdate(this.dynamicFieldData).subscribe({next:l=>{l!=null?l.success&&(this.commonService.successMessage(l.message),this.dynamicFieldData=new w,i&&this.router.navigate(["dynamic-field"])):this.commonService.errorMessage(l.message)}}))}backTolListPage(){this.router.navigate(["dynamic-field"])}subGroupsListLookup(){this.lookupService.dropdown("subGroup").subscribe({next:i=>{i!=null?i.success&&(this.subGroupList=i.response):this.commonService.errorMessage(i.message)}})}dynamicsFieldListLookup(){this.lookupService.dropdown("parentDynamicField").subscribe({next:i=>{i!=null?i.success&&(this.dynamicsFieldList=i.response):this.commonService.errorMessage(i.message)}})}};o.\u0275fac=function(l){return new(l||o)(v(k),v(I),v(Z),v(Y),v(le))},o.\u0275cmp=T({type:o,selectors:[["app-stories-edit"]],standalone:!0,features:[M],decls:56,vars:17,consts:[["f","ngForm"],["displayName","ngModel"],["fieldLevel","ngModel"],["dataType","ngModel"],["subGroupId","ngModel"],["parentId","ngModel"],[1,"navbar","bg-body-tertiary","shadow-sm"],[1,"container-fluid"],["routerLink","/dynamic-field",1,""],[1,"text-muted"],[1,"container-fluid","mt-3"],["novalidate","",3,"ngSubmit"],[1,"row","g-3"],[1,"col-lg-12","d-flex"],[1,"form-check","me-2"],["type","radio","name","flexRadioDefault","id","Parent",1,"form-check-input",3,"ngModelChange","ngModel","value"],["for","Parent",1,"form-check-label"],[1,"form-check"],["type","radio","name","flexRadioDefault","id","Child",1,"form-check-input",3,"ngModelChange","ngModel","value"],["for","Child",1,"form-check-label"],[1,"col-lg-4","col-12"],["for","displayName",1,"form-label"],[1,"text-danger"],["type","text","id","displayName","placeholder","Display Name","name","displayName","required","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngClass"],[1,"invalid-feedback"],[1,"col-lg-4","col-sm-12","col-md-6","col-12"],["for","itemTypeId",1,"form-label"],["bindLabel","name","bindValue","id","placeholder","Choose Field level","name","fieldLevel",3,"ngModelChange","items","ngModel"],["bindLabel","name","bindValue","id","placeholder","Choose Data Type","name","dataType",3,"ngModelChange","items","ngModel"],["bindLabel","name","bindValue","id","placeholder","Choose Sub Group","name","subGroupId",3,"ngModelChange","items","ngModel"],[1,"my-3"],["type","button",1,"btn","btn-sm","btn-outline-danger","me-1",3,"click","disabled"],["type","submit",1,"btn","btn-sm","common-btn-width-outline",3,"disabled"],["bindLabel","displayName","bindValue","id","placeholder","Choose Parent Id","name","parentId",3,"ngModelChange","items","ngModel"]],template:function(l,n){if(l&1){let c=E();t(0,"nav",6)(1,"div",7)(2,"div")(3,"a",8),d(4,"Dynamic Field / "),a(),t(5,"a",9),d(6,"Edit"),a()()()(),t(7,"div",10)(8,"form",11,0),x("ngSubmit",function(){g(c);let m=L(9);return h(m.form.valid&&n.dynamicFieldDataUpdate(!0))}),t(10,"div",12)(11,"div",13)(12,"div",14)(13,"input",15),F("ngModelChange",function(m){return g(c),D(n.dynamicFieldData.parentId,m)||(n.dynamicFieldData.parentId=m),h(m)}),a(),t(14,"label",16),d(15," Parent "),a()(),t(16,"div",17)(17,"input",18),F("ngModelChange",function(m){return g(c),D(n.dynamicFieldData.parentId,m)||(n.dynamicFieldData.parentId=m),h(m)}),a(),t(18,"label",19),d(19," Child "),a()()(),t(20,"div",20)(21,"label",21),d(22,"Display Name "),t(23,"span",22),d(24,"*"),a()(),t(25,"input",23,1),F("ngModelChange",function(m){return g(c),D(n.dynamicFieldData.displayName,m)||(n.dynamicFieldData.displayName=m),h(m)}),a(),t(27,"div",24),d(28," Display Name is required. "),a()(),t(29,"div",25)(30,"label",26),d(31,"Field level "),t(32,"span",22),d(33,"*"),a()(),t(34,"ng-select",27,2),F("ngModelChange",function(m){return g(c),D(n.dynamicFieldData.fieldLevel,m)||(n.dynamicFieldData.fieldLevel=m),h(m)}),a()(),t(36,"div",25)(37,"label",26),d(38,"Data Type "),t(39,"span",22),d(40,"*"),a()(),t(41,"ng-select",28,3),F("ngModelChange",function(m){return g(c),D(n.dynamicFieldData.dataType,m)||(n.dynamicFieldData.dataType=m),h(m)}),a()(),t(43,"div",25)(44,"label",26),d(45,"Sub Group "),t(46,"span",22),d(47,"*"),a()(),t(48,"ng-select",29,4),F("ngModelChange",function(m){return g(c),D(n.dynamicFieldData.subGroupId,m)||(n.dynamicFieldData.subGroupId=m),h(m)}),a()(),u(50,Ve,7,2,"div",25),a(),t(51,"div",30)(52,"button",31),x("click",function(){return g(c),h(n.backTolListPage())}),d(53,"Cancel"),a(),t(54,"button",32),d(55,"Save & Exit"),a()()()()}if(l&2){let c=L(9),p=L(26);r(13),S("ngModel",n.dynamicFieldData.parentId),_("value",1),r(4),S("ngModel",n.dynamicFieldData.parentId),_("value",0),r(8),S("ngModel",n.dynamicFieldData.displayName),_("ngClass",j(15,Ae,c.submitted&&p.errors)),r(9),_("items",n.fieldTypeList),S("ngModel",n.dynamicFieldData.fieldLevel),r(7),_("items",n.dataTypeList),S("ngModel",n.dynamicFieldData.dataType),r(7),_("items",n.subGroupList),S("ngModel",n.dynamicFieldData.subGroupId),r(2),f(n.dynamicFieldData.parentId==0?50:-1),r(2),_("disabled",!c.valid),r(2),_("disabled",!c.valid)}},dependencies:[ae,ie,K,te,Q,X,ne,ee,$,P,q,O,se]});let e=o;return e})();var oi=[{path:"",component:pe},{path:"edit/:id",component:A},{path:"new",component:A}];export{oi as DYNAMICFIELD_ROUTES};
