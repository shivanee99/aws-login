import{a as k}from"./chunk-KRWTTJPS.js";import"./chunk-QJUVNZXF.js";import{a as E}from"./chunk-KMBGROKD.js";import{a as te}from"./chunk-A4J2ZQI3.js";import{a as ae}from"./chunk-TX4RGXHY.js";import{a as ie}from"./chunk-L32G27ZM.js";import{a as q,c as J,d as P}from"./chunk-SOWNCCG4.js";import{a as T}from"./chunk-KSLAI2AB.js";import{b as Y,m as D}from"./chunk-DYQSPWX7.js";import{$a as o,Aa as d,Ac as W,Ba as l,Bb as F,Cc as X,Ka as G,Mc as ee,Oa as C,Qa as V,T as N,Wa as w,Y as z,Ya as O,Za as A,_a as n,ab as p,ba as S,eb as _,fc as B,gb as f,hb as h,ja as u,ka as v,kb as x,ob as Z,pb as Q,qb as $,rb as M,sb as m,sc as H,xa as b,zc as K}from"./chunk-FCI7FGJ6.js";import"./chunk-WWX6BADO.js";function ce(r,i){if(r&1){let g=_();n(0,"div",0)(1,"div",1)(2,"span",2),m(3,"Gallery"),o(),n(4,"button",3),f("click",function(){u(g);let t=h();return v(t.closeCanvas())}),o()(),n(5,"div",4),p(6,"img",5),n(7,"div",6)(8,"button",7),f("click",function(){u(g);let t=h();return v(t.clipboard(t.galleryObj.imageUrl))}),m(9," Copy to Image URL"),o()()()(),p(10,"div",8)}if(r&2){let g=h();d(6),x("src",g.galleryObj.imageUrl,b)}}var j=(()=>{let i=class i{constructor(e,t,a,s,c){this.canvasService=e,this.statusService=t,this.timeZoneService=a,this.utilityService=s,this.commonService=c,this.galleryObj={},this.filteredStatusObj={},this.isShowCanvas=!1,this.isCopySelected=!1}ngOnInit(){}closeCanvas(){this.canvasService.canvasSetForMasterView(!1)}setViewData(e){this.canvasService.canvasGetForMasterView.subscribe(t=>this.isShowCanvas=t),this.galleryObj=e}clipboard(e){this.isCopySelected=this.utilityService.clipboard(e),this.commonService.successMessage("copied"),this.canvasService.canvasSetForMasterView(!1)}};i.\u0275fac=function(t){return new(t||i)(l(E),l(te),l(T),l(k),l(D))},i.\u0275cmp=S({type:i,selectors:[["app-gallery-view"]],standalone:!0,features:[F],decls:1,vars:1,consts:[["tabindex","-1","id","offcanvasRightJobTypeView","aria-labelledby","offcanvasRightLabel","data-bs-backdrop","static",1,"offcanvas","offcanvas-end","show",2,"width","500px"],[1,"offcanvas-header","common-header"],[1,"offcanvas-title"],["type","button",1,"btn-close",3,"click"],[1,"offcanvas-body","small"],[1,"img-fluid","gallery-avatar",3,"src"],[1,"mt-3","text-center"],["type","button",1,"btn","common-btn","border-0",3,"click"],[1,"offcanvas-backdrop","fade","show"]],template:function(t,a){t&1&&C(0,ce,11,1),t&2&&w(a.isShowCanvas?0:-1)},styles:[".img-avatar[_ngcontent-%COMP%]{width:100%;object-fit:cover;border-radius:10px;border:1px solid #ce4141}"]});let r=i;return r})();var L=(()=>{let i=class i{constructor(e){this.apiService=e}list(e){return this.apiService.apiCall("post","gallery/list",e)}get(e){return this.apiService.apiCall("get","gallery/"+e+"/edit")}addOrUpdate(e){var t="update";return e.id==""&&(t="create"),this.apiService.apiCall("post","gallery/"+t,e)}};i.\u0275fac=function(t){return new(t||i)(z(Y))},i.\u0275prov=N({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var de=(r,i)=>i.id;function pe(r,i){if(r&1){let g=_();n(0,"div",9)(1,"a",13),f("click",function(){let t=u(g).$implicit,a=h();return v(a.viewGallery(t))}),p(2,"img",14),o()()}if(r&2){let g=i.$implicit;d(2),x("src",g.imageUrl,b)}}function fe(r,i){r&1&&(n(0,"div",10),p(1,"img",15),n(2,"p"),m(3,"No Data Found"),o()())}var se=(()=>{let i=class i{constructor(e,t,a,s,c){this.galleryService=e,this.commonService=t,this.loaderService=a,this.timeZoneService=s,this.canvasService=c,this.listDefaultParams=new ie,this.galleryArray=[],this.eventFrom=G(""),this.loaderType=G(""),this.isShowFilter=G(!1),this.isEditCanvasShow=!1,this.isFilterSelected=!1,this.showParentPageLoader=!0,this.listLoadingMessage="Loading Data...",this.totalRows=0}ngOnInit(){this.galleryList()}galleryList(){this.loaderType.set("full"),this.galleryService.list(this.listDefaultParams).subscribe({next:e=>{e!=null?e.success&&e.response.length>0&&(this.galleryArray=e.response,this.listLoadingMessage="",this.totalRows=e.totalRows,this.listDefaultParams.pageNumber=e.pageNumber,this.listDefaultParams.pageSize=e.pageSize):(this.commonService.errorMessage(e.message),this.listLoadingMessage=e.message),this.showParentPageLoader=!1}})}viewGallery(e){this.canvasService.canvasSetForMasterView(!0),this.galleryView.setViewData(e)}displayDateInUserFormat(e){return this.timeZoneService.convertDateInUserFormat(e)}changePageNumberAndSize(e){this.listDefaultParams.pageNumber=e.pageNumber,this.listDefaultParams.pageSize=e.pageSize,this.galleryList()}filterList(e){this.listDefaultParams.pageNumber=1,this.listDefaultParams.pageSize=10,this.listDefaultParams.filterConditions=e.filterConditions,this.listDefaultParams.sortingConditions=e.sortingConditions,this.listDefaultParams.sortingColumn=e.sortingColumn,this.listDefaultParams.sortingType=e.sortingType,this.listDefaultParams.filterConditions.length>0||this.listDefaultParams.sortingConditions.indexOf("name asc")<0||this.listDefaultParams.sortingConditions==""?this.isFilterSelected=!0:this.isFilterSelected=!1,this.galleryList()}};i.\u0275fac=function(t){return new(t||i)(l(L),l(D),l(H),l(T),l(E))},i.\u0275cmp=S({type:i,selectors:[["app-pages"]],viewQuery:function(t,a){if(t&1&&Z(j,5),t&2){let s;Q(s=$())&&(a.galleryView=s.first)}},standalone:!0,features:[F],decls:19,vars:4,consts:[[1,"navbar","bg-body-tertiary","shadow-sm"],[1,"container-fluid"],["routerLink","/dashboard"],[1,"text-muted"],["role","button"],["routerLink","./new","type","button",1,"btn","common-btn","mx-1"],[1,"bi","bi-plus"],[1,"container-fluid","mt-3"],[1,"row","g-2"],[1,"col-md-4"],[1,"text-center","align-content-center"],[1,"col-12"],[3,"parentListRefresh","pageNumber","pageSize","totalRows"],["type","button",1,"w-100",3,"click"],[1,"img-fluid","gallery-avatar",3,"src"],["src","assets/dummy-img-list.png",1,"img-fluid","img-avatar-fit"]],template:function(t,a){t&1&&(n(0,"nav",0)(1,"div",1)(2,"div")(3,"a",2),m(4,"Dashboard / "),o(),n(5,"a",3),m(6,"Gallery"),o()(),n(7,"form",4)(8,"a",5),p(9,"i",6),m(10,"Add"),o()()()(),n(11,"div",7)(12,"div",8),O(13,pe,3,1,"div",9,de),C(15,fe,4,0,"div",10),n(16,"div",11)(17,"app-table-footer",12),f("parentListRefresh",function(c){return a.changePageNumberAndSize(c)}),o()()()(),p(18,"app-gallery-view")),t&2&&(d(13),A(a.galleryArray),d(2),w(a.galleryArray.length==0?15:-1),d(2),V("pageNumber",a.listDefaultParams.pageNumber)("pageSize",a.listDefaultParams.pageSize)("totalRows",a.totalRows))},dependencies:[ae,P,j],styles:[".img-avatar-fit[_ngcontent-%COMP%]{object-fit:cover;height:300px}"]});let r=i;return r})();var I=class{constructor(){this.id=0,this.imageUrl=""}};function ge(r,i){r&1&&p(0,"img",10)}function ue(r,i){if(r&1&&p(0,"img",11),r&2){let g=h();x("src",g.galleryImgFiles.imageUrl,b)}}var R=(()=>{let i=class i{constructor(e,t,a,s,c){this.galleryService=e,this.commonService=t,this.route=a,this.router=s,this.utilityService=c,this.galleryData=new I,this.isFormSubmit=!1,this.galleryImgFiles=[],this.isCopySelected=!1}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");if(e){var t=Number(e);this.getGalleryData(t)}}imageFileUpload(e){let t=e.target.files,a=1*1024*1024*1024;if(t.length>0)for(let s=0;s<t.length;s++){let c=t[s];if(c.size>a){this.commonService.errorMessage("File size exceeds 1 GB. Please upload a smaller image.");return}let y=new FileReader;y.onloadend=()=>{this.galleryImgFiles.push({id:0,imageUrl:y.result})},y.readAsDataURL(c)}}getGalleryData(e){this.isFormSubmit=!1,this.galleryService.get(e).subscribe({next:t=>{t!=null?t.success&&(t.response!=0?this.galleryImgFiles=t.response:this.galleryData=new I):this.commonService.errorMessage(t.message)}})}clipboard(e){this.isCopySelected=this.utilityService.clipboard(e),this.commonService.successMessage("copied")}galleryDataUpdate(e){if(this.galleryImgFiles!=null){this.isFormSubmit=!0;for(let t=0;t<this.galleryImgFiles.length;t++)this.galleryService.addOrUpdate(this.galleryImgFiles[t]).subscribe({next:a=>{a!=null?a.success&&(this.commonService.successMessage(a.message),this.galleryData=new I,e&&this.router.navigate(["gallery"])):this.commonService.errorMessage(a.message)}}),console.log(this.galleryImgFiles,"sdfjlskldjfkl")}}backTolListPage(){this.router.navigate(["gallery"])}};i.\u0275fac=function(t){return new(t||i)(l(L),l(D),l(q),l(J),l(k))},i.\u0275cmp=S({type:i,selectors:[["app-stories-edit"]],standalone:!0,features:[F],decls:24,vars:3,consts:[["f","ngForm"],[1,"navbar","bg-body-tertiary","shadow-sm"],[1,"container-fluid"],["routerLink","/gallery",1,""],[1,"text-muted"],["type","button",1,"btn","common-btn","border-0",3,"click"],[1,"container-fluid","mt-3"],["novalidate","",3,"ngSubmit"],[1,"row","g-3"],[1,"col-md-4"],["src","assets/dummy-img.png",1,"img-fluid","img-avatar"],[1,"img-fluid","img-avatar",3,"src"],["type","file","accept","image/*","multiple","",1,"form-control",3,"change"],[1,"small","text-danger"],[1,"my-3"],["type","button",1,"btn","btn-sm","btn-outline-danger","me-1",3,"click","disabled"],["type","submit",1,"btn","btn-sm","common-btn-width-outline",3,"disabled"]],template:function(t,a){if(t&1){let s=_();n(0,"nav",1)(1,"div",2)(2,"div")(3,"a",3),m(4,"Gallery / "),o(),n(5,"a",4),m(6,"Edit"),o()(),n(7,"button",5),f("click",function(){return u(s),v(a.clipboard(a.galleryImgFiles.imageUrl))}),m(8," Copy to Image URl"),o()()(),n(9,"div",6)(10,"form",7,0),f("ngSubmit",function(){u(s);let y=M(11);return v(y.form.valid&&a.galleryDataUpdate(!0))}),n(12,"div",8)(13,"div",9),C(14,ge,1,0,"img",10)(15,ue,1,1,"img",11),n(16,"input",12),f("change",function(y){return u(s),v(a.imageFileUpload(y))}),o(),n(17,"span",13),m(18,"File size exceeds 1 GB."),o()()(),n(19,"div",14)(20,"button",15),f("click",function(){return u(s),v(a.backTolListPage())}),m(21,"Cancel"),o(),n(22,"button",16),m(23,"Save & Exit"),o()()()()}if(t&2){let s=M(11);d(14),w(a.galleryImgFiles==null?14:15),d(6),V("disabled",!s.valid),d(2),V("disabled",!s.valid)}},dependencies:[ee,X,K,W,P,B],styles:[".img-avatar[_ngcontent-%COMP%]{height:300px;width:100%;object-fit:contain;border:1px solid #eae6e6}"]});let r=i;return r})();var Re=[{path:"",component:se},{path:"edit/:id",component:R},{path:"new",component:R}];export{Re as GALLERY_ROUTES};
