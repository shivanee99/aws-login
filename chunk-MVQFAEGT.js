import{a as ue,b as k}from"./chunk-U2EGM5ZX.js";import{a as pe}from"./chunk-QJUVNZXF.js";import{a as me}from"./chunk-D42AVTVB.js";import{a as de}from"./chunk-TX4RGXHY.js";import{a as ce}from"./chunk-L32G27ZM.js";import{a as K,c as X,d as L}from"./chunk-SOWNCCG4.js";import{a as le}from"./chunk-KSLAI2AB.js";import{b as Y,m as A}from"./chunk-DYQSPWX7.js";import{$a as o,$b as H,Aa as l,Ac as ne,Ba as v,Bb as M,Bc as ae,Cc as oe,Db as P,Ic as re,Ka as N,Mc as se,Oa as f,Qa as h,T as W,Wa as g,Y as z,Ya as B,Za as U,_a as n,ab as u,ba as T,eb as j,fc as J,gb as I,hb as S,ja as _,ka as C,lb as q,ob as O,pb as Q,qb as Z,rb as b,sb as s,sc as $,tb as y,ub as G,vc as ee,xb as x,yb as w,yc as te,zb as E,zc as ie}from"./chunk-FCI7FGJ6.js";import"./chunk-WWX6BADO.js";var F=(()=>{let a=class a{constructor(t){this.apiService=t}list(t){return this.apiService.apiCall("post","incentive/list",t)}get(t){return this.apiService.apiCall("get","incentive/"+t+"/edit")}addOrUpdate(t){var r="update";return t.id==""&&(r="create"),this.apiService.apiCall("post","incentive/"+r,t)}updateActiveFlag(t){return this.apiService.apiCall("post","incentive/flag/active/update",t)}};a.\u0275fac=function(r){return new(r||a)(z(Y))},a.\u0275prov=W({token:a,factory:a.\u0275fac,providedIn:"root"});let e=a;return e})();var Ce=(e,a)=>a.id;function Se(e,a){e&1&&u(0,"i",16)}function be(e,a){e&1&&u(0,"i",17)}function ye(e,a){if(e&1&&(n(0,"span"),f(1,Se,1,0,"i",16)(2,be,1,0,"i",17),o()),e&2){let d=S();l(),g(d.listDefaultParams.sortingType=="asc"?1:2)}}function De(e,a){e&1&&u(0,"i",16)}function Ie(e,a){e&1&&u(0,"i",17)}function xe(e,a){if(e&1&&(n(0,"span"),f(1,De,1,0,"i",16)(2,Ie,1,0,"i",17),o()),e&2){let d=S();l(),g(d.listDefaultParams.sortingType=="asc"?1:2)}}function we(e,a){e&1&&u(0,"i",16)}function Ee(e,a){e&1&&u(0,"i",17)}function Te(e,a){if(e&1&&(n(0,"span"),f(1,we,1,0,"i",16)(2,Ee,1,0,"i",17),o()),e&2){let d=S();l(),g(d.listDefaultParams.sortingType=="asc"?1:2)}}function Me(e,a){e&1&&u(0,"i",16)}function Pe(e,a){e&1&&u(0,"i",17)}function Le(e,a){if(e&1&&(n(0,"span"),f(1,Me,1,0,"i",16)(2,Pe,1,0,"i",17),o()),e&2){let d=S();l(),g(d.listDefaultParams.sortingType=="asc"?1:2)}}function Ae(e,a){e&1&&u(0,"i",16)}function Fe(e,a){e&1&&u(0,"i",17)}function Ne(e,a){if(e&1&&(n(0,"span"),f(1,Ae,1,0,"i",16)(2,Fe,1,0,"i",17),o()),e&2){let d=S();l(),g(d.listDefaultParams.sortingType=="asc"?1:2)}}function ke(e,a){if(e&1&&(n(0,"tr")(1,"td"),s(2),o(),n(3,"td"),s(4),o(),n(5,"td"),s(6),o(),n(7,"td"),s(8),o(),n(9,"td"),s(10),o(),n(11,"td")(12,"a",18),u(13,"i",19),o()()()),e&2){let d=a.$implicit;l(2),y(d.title),l(2),y(d.createdAt),l(2),y(d.createdBy),l(2),y(d.updatedAt),l(2),y(d.updatedBy),l(2),q("routerLink","./edit/",d.id,"")}}function Ve(e,a){if(e&1&&(n(0,"tr",14)(1,"td",20),s(2),o()()),e&2){let d=S();l(2),G("",d.listLoadingMessage," ")}}var ge=(()=>{let a=class a{constructor(t,r,i,m){this.incentiveService=t,this.commonService=r,this.loaderService=i,this.timeZoneService=m,this.listDefaultParams=new ce,this.incentiveArray=[],this.loaderType=N(""),this.isShowFilter=N(!1),this.isEditCanvasShow=!1,this.isFilterSelected=!1,this.showParentPageLoader=!0,this.listLoadingMessage="Loading Data...",this.totalRows=0}ngOnInit(){this.incentiveList()}incentiveList(){this.loaderType.set("full"),this.incentiveService.list(this.listDefaultParams).subscribe({next:t=>{t!=null?t.success&&t.response.length>0&&(this.incentiveArray=t.response,this.listLoadingMessage="",this.totalRows=t.totalRows,this.listDefaultParams.pageNumber=t.pageNumber,this.listDefaultParams.pageSize=t.pageSize):(this.commonService.errorMessage(t.message),this.listLoadingMessage=t.message),this.showParentPageLoader=!1}})}displayDateInUserFormat(t){return this.timeZoneService.convertDateInUserFormat(t)}changePageNumberAndSize(t){this.listDefaultParams.pageNumber=t.pageNumber,this.listDefaultParams.pageSize=t.pageSize,this.incentiveList()}filterList(t){this.listDefaultParams.pageNumber=1,this.listDefaultParams.pageSize=10,this.listDefaultParams.filterConditions=t.filterConditions,this.listDefaultParams.sortingConditions=t.sortingConditions,this.listDefaultParams.sortingColumn=t.sortingColumn,this.listDefaultParams.sortingType=t.sortingType,this.listDefaultParams.filterConditions.length>0||this.listDefaultParams.sortingConditions.indexOf("name asc")<0||this.listDefaultParams.sortingConditions==""?this.isFilterSelected=!0:this.isFilterSelected=!1,this.incentiveList()}updateActiveFlagData(t,r){if(this.incentiveArray.length>0){for(var i=0;i<this.incentiveArray.length;i++)if(this.incentiveArray[i].id==t&&(this.incentiveArray[i].isActive=r.target.checked==!0?1:0,t!=null&&t!="")){var m={id:t,isActive:this.incentiveArray[i].isActive};this.incentiveService.updateActiveFlag(m).subscribe({next:p=>{p!=null?p.success&&this.commonService.successMessage(p.message):this.commonService.errorMessage(p.message)}})}}}};a.\u0275fac=function(r){return new(r||a)(v(F),v(A),v($),v(le))},a.\u0275cmp=T({type:a,selectors:[["app-pages"]],standalone:!0,features:[M],decls:41,vars:9,consts:[[1,"navbar","bg-body-tertiary","shadow-sm"],[1,"container-fluid"],["routerLink","/dashboard"],[1,"text-muted"],["role","button"],["routerLink","./new","type","button",1,"btn","common-btn","mx-1"],[1,"bi","bi-plus"],[1,"container-fluid","mt-3"],[1,"row"],[1,"col-12"],[1,"list-table"],[1,"table","table-sm"],[1,"table-secondary"],["scope","row"],[1,"text-center"],[3,"parentListRefresh","pageNumber","pageSize","totalRows"],[1,"bi","bi-arrow-down"],[1,"bi","bi-arrow-up"],["type","button",1,"btn","common-btn","me-1",3,"routerLink"],[1,"bi","bi-pencil"],["colspan","8"]],template:function(r,i){r&1&&(n(0,"nav",0)(1,"div",1)(2,"div")(3,"a",2),s(4,"Dashboard / "),o(),n(5,"a",3),s(6,"Incentive"),o()(),n(7,"form",4)(8,"a",5),u(9,"i",6),s(10,"Add"),o()()()(),n(11,"div",7)(12,"div",8)(13,"div",9)(14,"div",10)(15,"table",11)(16,"thead")(17,"tr",12)(18,"th",13),s(19,"Title "),f(20,ye,3,1,"span"),o(),n(21,"th",13),s(22,"Created At "),f(23,xe,3,1,"span"),o(),n(24,"th",13),s(25,"Created By "),f(26,Te,3,1,"span"),o(),n(27,"th",13),s(28,"Updated At "),f(29,Le,3,1,"span"),o(),n(30,"th",13),s(31,"Updated By "),f(32,Ne,3,1,"span"),o(),n(33,"th",13),s(34,"Actions"),o()()(),n(35,"tbody"),B(36,ke,14,7,"tr",null,Ce),f(38,Ve,3,1,"tr",14),o()()()(),n(39,"div",9)(40,"app-table-footer",15),I("parentListRefresh",function(p){return i.changePageNumberAndSize(p)}),o()()()()),r&2&&(l(20),g(i.listDefaultParams.sortingColumn=="name"?20:-1),l(3),g(i.listDefaultParams.sortingColumn=="createdAt"?23:-1),l(3),g(i.listDefaultParams.sortingColumn=="createdBy"?26:-1),l(3),g(i.listDefaultParams.sortingColumn=="updatedAt"?29:-1),l(3),g(i.listDefaultParams.sortingColumn=="updatedBy"?32:-1),l(4),U(i.incentiveArray),l(2),g(i.incentiveArray.length==0?38:-1),l(2),h("pageNumber",i.listDefaultParams.pageNumber)("pageSize",i.listDefaultParams.pageSize)("totalRows",i.totalRows))},dependencies:[de,L]});let e=a;return e})();var D=class{constructor(){this.id=0,this.title="",this.description=""}};var V=e=>({"is-invalid":e}),R=(()=>{let a=class a{constructor(t,r,i,m,p,c){this.incentiveService=t,this.commonService=r,this.route=i,this.router=m,this.lookupService=p,this.dataTransferService=c,this.incentiveData=new D,this.isFormSubmit=!1,this.stateList=[],this.incentiveId=0}ngOnInit(){this.stateLookup(1);let t=this.route.snapshot.paramMap.get("id");t&&(this.incentiveId=Number(t),this.getIncentiveData(this.incentiveId))}ngAfterViewInit(){this.dataTransferService.pageSetForDynamicDataEdit(!0),this.dynamicDataEdit.fetchDynamicFields("Incentive",this.incentiveId)}getIncentiveData(t){this.isFormSubmit=!1,this.incentiveService.get(t).subscribe({next:r=>{r!=null?r.success&&(r.response!=0?this.incentiveData=r.response:this.incentiveData=new D):this.commonService.errorMessage(r.message)}})}incentiveDataUpdate(t){var r=this.dynamicDataEdit.getDynamicFieldsValue();this.incentiveData!=null&&(this.isFormSubmit=!0,this.incentiveData.dynamicFields=r,this.incentiveService.addOrUpdate(this.incentiveData).subscribe({next:i=>{i!=null?i.success&&(this.commonService.successMessage(i.message),this.incentiveData=new D,t&&this.router.navigate(["incentive"])):this.commonService.errorMessage(i.message)}}))}backTolListPage(){this.router.navigate(["incentive"])}stateLookup(t){this.lookupService.dropdownCascade("states",t?.toString()).subscribe({next:r=>{r!=null?r.success&&(this.stateList=r.response):this.commonService.errorMessage(r.message)}})}};a.\u0275fac=function(r){return new(r||a)(v(F),v(A),v(K),v(X),v(me),v(ue))},a.\u0275cmp=T({type:a,selectors:[["app-stories-edit"]],viewQuery:function(r,i){if(r&1&&O(k,5),r&2){let m;Q(m=Z())&&(i.dynamicDataEdit=m.first)}},standalone:!0,features:[M],decls:50,vars:16,consts:[["f","ngForm"],["stateId","ngModel"],["title","ngModel"],["amount","ngModel"],["description","ngModel"],[1,"navbar","bg-body-tertiary","shadow-sm"],[1,"container-fluid"],["routerLink","/incentive",1,""],[1,"text-muted"],[1,"container-fluid","mt-3"],["novalidate","",3,"ngSubmit"],[1,"row","g-3"],[1,"col-lg-4","col-sm-12","col-md-6","col-12"],["for","state",1,"form-label"],[1,"text-danger"],["bindLabel","name","bindValue","id","placeholder","Choose State","name","stateId",3,"ngModelChange","items","ngModel"],[1,"col-lg-4","col-12"],["for","title",1,"form-label"],["type","text","id","title","placeholder","Title","name","title","required","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngClass"],[1,"invalid-feedback"],["for","Amount",1,"form-label"],["type","text","id","Amount","placeholder","Amount","name","amount","required","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngClass"],[1,"col-12","col-md-12"],["for","description",1,"form-label"],["id","description","name","description","rows","3","placeholder","Description",1,"form-control",3,"ngModelChange","ngModel","ngClass"],[1,"mt-4"],[1,"common-header","mb-2"],[1,"my-3"],["type","button",1,"btn","btn-sm","btn-outline-danger","me-1",3,"click","disabled"],["type","submit",1,"btn","btn-sm","common-btn-width-outline",3,"disabled"]],template:function(r,i){if(r&1){let m=j();n(0,"nav",5)(1,"div",6)(2,"div")(3,"a",7),s(4,"Incentive / "),o(),n(5,"a",8),s(6,"Edit"),o()()()(),n(7,"div",9)(8,"form",10,0),I("ngSubmit",function(){_(m);let c=b(9);return C(c.form.valid&&i.incentiveDataUpdate(!0))}),n(10,"div",11)(11,"div",12)(12,"label",13),s(13,"State "),n(14,"span",14),s(15,"*"),o()(),n(16,"ng-select",15,1),E("ngModelChange",function(c){return _(m),w(i.incentiveData.stateId,c)||(i.incentiveData.stateId=c),C(c)}),o()(),n(18,"div",16)(19,"label",17),s(20,"Title "),n(21,"span",14),s(22,"*"),o()(),n(23,"input",18,2),E("ngModelChange",function(c){return _(m),w(i.incentiveData.title,c)||(i.incentiveData.title=c),C(c)}),o(),n(25,"div",19),s(26," Title is required. "),o()(),n(27,"div",16)(28,"label",20),s(29,"Amount "),n(30,"span",14),s(31,"*"),o()(),n(32,"input",21,3),E("ngModelChange",function(c){return _(m),w(i.incentiveData.amount,c)||(i.incentiveData.amount=c),C(c)}),o(),n(34,"div",19),s(35," Amount is required. "),o()(),n(36,"div",22)(37,"label",23),s(38,"Description"),o(),n(39,"textarea",24,4),E("ngModelChange",function(c){return _(m),w(i.incentiveData.description,c)||(i.incentiveData.description=c),C(c)}),o()()(),n(41,"div",25)(42,"div",26),s(43," Dynamic Field "),o(),u(44,"app-dynamic-field-data"),o(),n(45,"div",27)(46,"button",28),I("click",function(){return _(m),C(i.backTolListPage())}),s(47,"Cancel"),o(),n(48,"button",29),s(49,"Save & Exit"),o()()()()}if(r&2){let m=b(9),p=b(24),c=b(33),he=b(40);l(16),h("items",i.stateList),x("ngModel",i.incentiveData.stateId),l(7),x("ngModel",i.incentiveData.title),h("ngClass",P(10,V,m.submitted&&p.errors)),l(9),x("ngModel",i.incentiveData.amount),h("ngClass",P(12,V,m.submitted&&c.errors)),l(7),x("ngModel",i.incentiveData.description),h("ngClass",P(14,V,m.submitted&&he.errors)),l(7),h("disabled",!m.valid),l(2),h("disabled",!m.valid)}},dependencies:[se,oe,ee,te,ie,re,ae,ne,L,J,H,pe,k]});let e=a;return e})();var st=[{path:"",component:ge},{path:"edit/:id",component:R},{path:"new",component:R}];export{st as INCENTIVE_ROUTES};
